[opc@node1 ~]$ history
    1  exit
    2  clear
    3  clear
    4  sudo dnf update -y
    5  sudo hostnamectl set-hostname node1.cdp
    6  sudo nano /etc/hosts
    7  sudo firewall-cmd --permanent --add-service=ssh
    8  sudo firewall-cmd --permanent --add-port=8080/tcp    # Ambari
    9  sudo firewall-cmd --permanent --add-port=8443/tcp    # Ambari HTTPS
   10  sudo firewall-cmd --permanent --add-port=50070/tcp   # HDFS NameNode
   11  sudo firewall-cmd --permanent --add-port=8088/tcp    # YARN ResourceManager
   12  sudo firewall-cmd --permanent --add-port=21000/tcp   # Atlas
   13  sudo firewall-cmd --permanent --add-port=2181/tcp    # Zookeeper
   14  sudo firewall-cmd --permanent --add-service=http
   15  sudo firewall-cmd --permanent --add-service=https
   16  sudo firewall-cmd --reload
   17  clear
   18  sudo dnf install -y java-11-openjdk java-11-openjdk-devel
   19  sudo dnf install -y python39 python39-pip python39-devel
   20  # ✅ COMANDOS CORRETOS para Oracle Linux 9:
   21  sudo dnf install -y python3-pip python3-setuptools python3-pip-wheel
   22  sudo dnf install -y python3-devel
   23  sudo dnf install -y gcc gcc-c++ make automake
   24  sudo dnf install -y nginx
   25  sudo systemctl enable nginx
   26  sudo dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm
   27  sudo dnf install -y snapd
   28  sudo systemctl enable --now snapd.socket
   29  sudo ln -s /var/lib/snapd/snap /snap
   30  sudo snap install --classic certbot
   31  sudo ln -s /snap/bin/certbot /usr/bin/certbot
   32  sudo nano /etc/nginx/conf.d/cdp.conf
   33  sudo systemctl start nginx
   34  sudo nginx -t  # testar configuração
   35  sudo certbot --nginx -d node1.cdp.dev.br
   36  clear
   37  sudo systemctl enable ambari-agent
   38  sudo systemctl start ambari-agent
   39  sudo systemctl status ambari-agent
   40  exit
   41  sudo nano /etc/hosts
   42  exit
   43  sudo systemctl restart ambari-agent
   44  sudo systemctl status ambari-agent
   45  exit
   46  ping -c 2 10.0.1.144
   47  ip a | grep inet
   48  exit
   49  sudo systemctl stop firewalld
   50  sudo systemctl disable firewalld
   51  exit
   52  java -version
   53  exit
   54  rpm -qa | grep java
   55  java -version
   56  sudo dnf remove -y java-11-openjdk java-11-openjdk-headless java-11-openjdk-devel
   57  sudo dnf install -y java-1.8.0-openjdk java-1.8.0-openjdk-headless java-1.8.0-openjdk-devel
   58  java -version
   59  readlink -f /usr/bin/java
   60  ls -la /usr/lib/jvm/
   61  JAVA_HOME=$(readlink -f /usr/bin/java | sed 's:/bin/java::')
   62  echo $JAVA_HOME
   63  sudo ambari-agent restart
   64  java -version
   65  echo $JAVA_HOME
   66  /usr/bin/odp-select versions
   67  sudo dnf install -y odp-select
   68  sudo ambari-agent restart
   69  sudo tail -f /var/log/ambari-agent/ambari-agent.log
   70  java -version
   71  echo $JAVA_HOME
   72  /usr/bin/odp-select versions
   73  sudo ambari-agent status
   74  sudo tail -100 /var/log/ambari-agent/ambari-agent.log
   75  exit
   76  java -version
   77  exit
   78  java -version
   79  sudo yum remove -y java*
   80  sudo yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel
   81  sudo tee /etc/profile.d/java.sh <<'EOF'
   82  sudo chmod +x /etc/profile.d/java.sh
   83  source /etc/profile.d/java.sh
   84  echo $JAVA_HOME
   85  # Deve mostrar algo como /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.362.b09-2.el7_9.x86_64
   86  java -version
   87  exit
   88  ls -l /usr/odp/current/hive-client
   89  exit
   90  sudo odp-select status hive-client          # provavelmente retornará 'none'
   91  exit
   92  sudo systemctl restart ambari-agent
   93  exit
   94  sudo yum -y install hive-hcatalog hive_1_2_2_0_128-jdbc hive-webhcat
   95  sudo odp-select set hive-client 1.2.2.0-128
   96  sudo ambari-agent restart
   97  exit
   98  sudo systemctl status ambari-aggent
   99  sudo systemctl status ambari-agent
  100  sudo ls -lh /var/lib/ambari-server/resources/mysql-connector-java.jar
  101  curl -I http://master.cdp:8080/resources/mysql-connector-java.jar
  102  sudo curl -L -o /var/lib/ambari-server/resources/mysql-connector-java.jar   https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.0.33/mysql-connector-j-8.0.33.jar
  103  sudo chmod 644 /var/lib/ambari-server/resources/mysql-connector-java.jar
  104  sudo chcon -t httpd_sys_content_t /var/lib/ambari-server/resources/mysql-connector-java.jar  # se SELinux = enforcing
  105  exit
  106  curl -I http://master.cdp:8080/resources/mysql-connector-java.jar   # agora deve ser 200 OK
  107  sudo systemctl status mysqld   # se usa MySQL 8
  108  sudo systemctl status mariadb  # se usa MariaDB 10.6 do Oracle Linux 9
  109  sudo ss -ltnp | grep 3306      # deve mostrar LISTEN se estiver rodando
  110  sudo systemctl enable --now mariadb
  111  sudo mysql_secure_installation
  112  telnet node1.cdp 3306        # de dentro do node1 → deve conectar
  113  mysql -u root -p
  114  sudo mysql
  115  sudo systemctl restart mariadb
  116  sudo systemctl status mariadb
  117  clear
  118  exit
  119  history
  120  ping cdp.dev.br
  121  history
  122  exit
  123  history
  124  exit
  125  history
[opc@node1 ~]$