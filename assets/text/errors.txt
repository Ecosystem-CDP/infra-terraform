stderr: 
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
 stdout:
2025-12-23 22:12:10,665 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:10,682 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:12:11,145 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:11,152 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:12:11,153 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:12:11,153 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:12:11,153 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:12:11,153 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:12:11,153 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:12:11,153 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:12:11,153 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:12:11,154 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:12:11,154 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:12:11,154 - Group['livy'] {}
2025-12-23 22:12:11,157 - Group['spark'] {}
2025-12-23 22:12:11,160 - Group['ranger'] {}
2025-12-23 22:12:11,161 - Group['hdfs'] {}
2025-12-23 22:12:11,162 - Group['hadoop'] {}
2025-12-23 22:12:11,162 - Group['nifi'] {}
2025-12-23 22:12:11,164 - Group['users'] {}
2025-12-23 22:12:11,165 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,169 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,171 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,173 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,177 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,179 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,181 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,185 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,187 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,189 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,193 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,195 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,197 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,201 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,203 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,205 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:11,209 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:12:11,221 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:12:11,221 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:12:11,222 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:11,223 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:11,223 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:12:11,237 - call returned (0, '1015')
2025-12-23 22:12:11,237 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:12:11,247 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:12:11,248 - Group['hdfs'] {}
2025-12-23 22:12:11,249 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:11,253 - FS Type: HDFS
2025-12-23 22:12:11,253 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:12:11,267 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:12:11,267 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:12:11,277 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:12:11,281 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:12:11,281 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:12:11,356 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:12:11,357 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:12:11,376 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:12:11,377 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:12:11,385 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:12:11,386 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:12:11,386 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:12:11,391 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:12:11,391 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:12:11,404 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:12:11,406 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:12:11,407 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:12:11,416 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:12:11,425 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:12:11,425 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:12:11,435 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:12:11,436 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:12:11,448 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:12:11,448 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:12:11,458 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:12:11,461 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:12:11,461 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:12:11,461 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:12:11,468 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:12:11,480 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:12:11,488 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:12:11,489 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:12:11,492 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:12:11,500 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:12:12,286 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:12,322 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:12:12,329 - Changing owner of package files
2025-12-23 22:12:12,329 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:12:12,336 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:12:12,336 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:12:12,340 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:12:12,341 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,342 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,345 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,349 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,349 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,350 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,351 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,356 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,357 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,364 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,365 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:12,369 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:12:12,373 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:12:12,373 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:12:12,381 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:12:12,381 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:12:13,163 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:12:13,180 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:12:13,180 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:12:13,180 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:12:13,180 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:12:13,181 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:12:13,181 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:12:13,181 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:12:13,181 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:12:13,186 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:12:13,200 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:12:13,209 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:12:13,222 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:12:13,233 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:12:13,237 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:12:13,248 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:58458, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:12:13,263 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c35001e, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:12:13,282 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:12:13,601 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:12:13,163 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:12:13,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:12:13,180 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:12:13,180 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:12:13,180 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:12:13,180 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:12:13,181 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:12:13,181 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:12:13,181 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:12:13,181 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:12:13,186 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:12:13,200 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:12:13,209 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:12:13,222 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:12:13,233 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:12:13,237 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:12:13,248 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:58458, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:12:13,263 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c35001e, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:12:13,282 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:12:13,601 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:12:13,602 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:12:13,611 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:12:13,611 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:12:13,700 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:12:13,713 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:12:13,716 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:12:13,716 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:12:13,719 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:13,719 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:12:13,733 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:12:13,733 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:12:13,734 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:12:13,742 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:13,742 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:12:13,751 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:12:13,752 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:12:13,752 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:12:13,755 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:13,755 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:12:13,764 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:12:13,769 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:12:13,769 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:12:13,778 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:13,784 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:13,789 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:12:13,789 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:12:13,800 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:12:13,801 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:12:13,801 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:12:13,803 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:13,807 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:12:13,808 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:12:13,808 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:12:13,818 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 22:12:19,784 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:19,792 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:12:20,007 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:20,009 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:12:20,010 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:12:20,010 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:12:20,010 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:12:20,010 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:12:20,010 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:12:20,011 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:12:20,011 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:12:20,011 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:12:20,011 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:12:20,011 - Group['livy'] {}
2025-12-23 22:12:20,013 - Group['spark'] {}
2025-12-23 22:12:20,014 - Group['ranger'] {}
2025-12-23 22:12:20,015 - Group['hdfs'] {}
2025-12-23 22:12:20,015 - Group['hadoop'] {}
2025-12-23 22:12:20,016 - Group['nifi'] {}
2025-12-23 22:12:20,016 - Group['users'] {}
2025-12-23 22:12:20,017 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,019 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,020 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,022 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,023 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,025 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,026 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,028 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,029 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,031 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,032 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,033 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,035 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,036 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,038 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,040 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:20,043 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:12:20,054 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:12:20,055 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:12:20,056 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:20,056 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:20,057 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:12:20,064 - call returned (0, '1015')
2025-12-23 22:12:20,065 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:12:20,070 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:12:20,071 - Group['hdfs'] {}
2025-12-23 22:12:20,072 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:20,073 - FS Type: HDFS
2025-12-23 22:12:20,073 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:12:20,082 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:12:20,082 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:12:20,088 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:12:20,089 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:12:20,089 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:12:20,131 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:12:20,132 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:12:20,144 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:12:20,144 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:12:20,148 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:12:20,148 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:12:20,148 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:12:20,151 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:12:20,152 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:12:20,157 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:12:20,159 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:12:20,160 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:12:20,165 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:12:20,170 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:12:20,170 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:12:20,175 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:12:20,177 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:12:20,183 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:12:20,183 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:12:20,188 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:12:20,189 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:12:20,189 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:12:20,190 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:12:20,193 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:12:20,198 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:12:20,203 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:12:20,204 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:12:20,204 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:12:20,209 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:12:20,662 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:20,679 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:12:20,682 - Changing owner of package files
2025-12-23 22:12:20,682 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:12:20,688 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:12:20,688 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:12:20,688 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:12:20,688 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,689 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,690 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,691 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,692 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,693 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,694 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,694 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,695 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,700 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,701 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:20,701 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:12:20,704 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:12:20,705 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:12:20,710 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:12:20,711 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:12:21,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:12:21,184 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:12:21,184 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:12:21,184 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:12:21,184 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:12:21,186 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:12:21,186 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:12:21,191 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:12:21,198 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:12:21,207 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:12:21,218 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:12:21,225 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:12:21,226 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:12:21,235 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:42448, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:12:21,245 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c35001f, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:12:21,267 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:12:21,584 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:12:21,177 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:12:21,183 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:12:21,184 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:12:21,184 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:12:21,184 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:12:21,184 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:12:21,185 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:12:21,186 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:12:21,186 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:12:21,191 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:12:21,198 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:12:21,207 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:12:21,218 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:12:21,225 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:12:21,226 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:12:21,235 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:42448, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:12:21,245 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c35001f, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:12:21,267 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:12:21,585 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:12:21,586 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:12:21,590 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:12:21,590 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:12:21,633 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:12:21,639 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:12:21,640 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:12:21,640 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:12:21,643 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:21,644 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:12:21,649 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:12:21,650 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:12:21,650 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:12:21,654 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:21,654 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:12:21,660 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:12:21,661 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:12:21,661 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:12:21,663 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:21,664 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:12:21,669 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:12:21,670 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:12:21,670 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:12:21,675 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:21,679 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:21,681 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:12:21,681 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:12:21,686 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:12:21,687 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:12:21,687 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:12:21,689 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:21,690 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:12:21,690 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:12:21,690 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:12:21,694 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 22:12:28,879 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:28,887 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:12:29,106 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:29,108 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:12:29,109 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:12:29,109 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:12:29,109 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:12:29,109 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:12:29,109 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:12:29,109 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:12:29,109 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:12:29,109 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:12:29,109 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:12:29,109 - Group['livy'] {}
2025-12-23 22:12:29,112 - Group['spark'] {}
2025-12-23 22:12:29,112 - Group['ranger'] {}
2025-12-23 22:12:29,113 - Group['hdfs'] {}
2025-12-23 22:12:29,113 - Group['hadoop'] {}
2025-12-23 22:12:29,114 - Group['nifi'] {}
2025-12-23 22:12:29,115 - Group['users'] {}
2025-12-23 22:12:29,115 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,117 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,118 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,120 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,121 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,123 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,124 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,126 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,127 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,128 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,130 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,131 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,133 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,134 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,136 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,137 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:29,138 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:12:29,143 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:12:29,144 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:12:29,145 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:29,145 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:29,146 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:12:29,153 - call returned (0, '1015')
2025-12-23 22:12:29,153 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:12:29,158 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:12:29,159 - Group['hdfs'] {}
2025-12-23 22:12:29,160 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:29,161 - FS Type: HDFS
2025-12-23 22:12:29,161 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:12:29,170 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:12:29,170 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:12:29,175 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:12:29,176 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:12:29,177 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:12:29,215 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:12:29,215 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:12:29,227 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:12:29,228 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:12:29,231 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:12:29,232 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:12:29,232 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:12:29,235 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:12:29,235 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:12:29,240 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:12:29,242 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:12:29,243 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:12:29,249 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:12:29,254 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:12:29,254 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:12:29,259 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:12:29,260 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:12:29,266 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:12:29,266 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:12:29,271 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:12:29,272 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:12:29,273 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:12:29,273 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:12:29,277 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:12:29,281 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:12:29,286 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:12:29,287 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:12:29,287 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:12:29,291 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:12:29,842 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:29,859 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:12:29,861 - Changing owner of package files
2025-12-23 22:12:29,862 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:12:29,867 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:12:29,867 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:12:29,867 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:12:29,868 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,869 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,870 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,870 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,871 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,872 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,873 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,874 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,875 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,879 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,880 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:29,881 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:12:29,884 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:12:29,884 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:12:29,890 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:12:29,890 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:12:30,372 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:12:30,377 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:12:30,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:12:30,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:12:30,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:12:30,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:12:30,383 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:12:30,391 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:12:30,399 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:12:30,410 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:12:30,415 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:12:30,420 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:12:30,426 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:48300, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:12:30,437 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350020, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:12:30,448 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:12:30,765 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:12:30,372 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:12:30,377 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:12:30,378 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:12:30,379 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:12:30,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:12:30,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:12:30,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:12:30,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:12:30,383 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:12:30,391 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:12:30,399 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:12:30,410 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:12:30,415 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:12:30,420 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:12:30,426 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:48300, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:12:30,437 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350020, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:12:30,448 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:12:30,765 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:12:30,766 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:12:30,770 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:12:30,771 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:12:30,814 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:12:30,820 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:12:30,821 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:12:30,821 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:12:30,824 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:30,824 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:12:30,830 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:12:30,831 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:12:30,831 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:12:30,834 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:30,834 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:12:30,839 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:12:30,840 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:12:30,841 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:12:30,843 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:30,843 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:12:30,848 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:12:30,849 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:12:30,849 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:12:30,854 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:30,858 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:30,860 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:12:30,860 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:12:30,865 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:12:30,865 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:12:30,866 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:12:30,868 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:30,869 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:12:30,869 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:12:30,869 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:12:30,873 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 22:12:42,246 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:42,254 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:12:42,472 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:42,474 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:12:42,475 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:12:42,475 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:12:42,475 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:12:42,475 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:12:42,475 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:12:42,476 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:12:42,476 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:12:42,476 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:12:42,476 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:12:42,476 - Group['livy'] {}
2025-12-23 22:12:42,478 - Group['spark'] {}
2025-12-23 22:12:42,479 - Group['ranger'] {}
2025-12-23 22:12:42,480 - Group['hdfs'] {}
2025-12-23 22:12:42,480 - Group['hadoop'] {}
2025-12-23 22:12:42,481 - Group['nifi'] {}
2025-12-23 22:12:42,482 - Group['users'] {}
2025-12-23 22:12:42,482 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,484 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,485 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,487 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,488 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,490 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,492 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,493 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,495 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,497 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,498 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,499 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,501 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,502 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,504 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,506 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:42,507 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:12:42,514 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:12:42,514 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:12:42,515 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:42,516 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:12:42,516 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:12:42,524 - call returned (0, '1015')
2025-12-23 22:12:42,524 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:12:42,529 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:12:42,530 - Group['hdfs'] {}
2025-12-23 22:12:42,531 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:12:42,532 - FS Type: HDFS
2025-12-23 22:12:42,532 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:12:42,541 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:12:42,541 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:12:42,546 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:12:42,547 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:12:42,547 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:12:42,587 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:12:42,587 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:12:42,599 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:12:42,600 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:12:42,604 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:12:42,604 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:12:42,604 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:12:42,607 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:12:42,608 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:12:42,613 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:12:42,615 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:12:42,615 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:12:42,620 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:12:42,625 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:12:42,625 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:12:42,630 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:12:42,631 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:12:42,637 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:12:42,637 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:12:42,642 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:12:42,643 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:12:42,643 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:12:42,644 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:12:42,647 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:12:42,652 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:12:42,657 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:12:42,658 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:12:42,658 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:12:42,663 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:12:43,398 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:12:43,416 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:12:43,418 - Changing owner of package files
2025-12-23 22:12:43,419 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:12:43,424 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:12:43,424 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:12:43,425 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:12:43,425 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,426 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,427 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,428 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,428 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,429 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,430 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,431 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,432 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,436 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,437 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:12:43,438 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:12:43,441 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:12:43,441 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:12:43,447 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:12:43,447 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:12:43,938 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:12:43,942 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:12:43,945 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:12:43,945 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:12:43,945 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:12:43,946 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:12:43,946 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:12:43,946 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:12:43,951 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:12:43,961 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:12:43,971 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:12:43,980 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:12:43,987 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:12:43,988 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:12:43,996 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:57018, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:12:44,013 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350021, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:12:44,030 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:12:44,346 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:12:43,938 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:12:43,942 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:12:43,943 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:12:43,944 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:12:43,945 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:12:43,945 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:12:43,945 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:12:43,946 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:12:43,946 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:12:43,946 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:12:43,951 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:12:43,961 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:12:43,971 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:12:43,980 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:12:43,987 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:12:43,988 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:12:43,996 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:57018, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:12:44,013 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350021, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:12:44,030 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:12:44,347 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:12:44,348 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:12:44,352 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:12:44,352 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:12:44,395 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:12:44,401 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:12:44,402 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:12:44,402 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:12:44,405 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:44,405 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:12:44,410 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:12:44,411 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:12:44,412 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:12:44,415 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:44,415 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:12:44,420 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:12:44,421 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:12:44,421 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:12:44,424 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:44,424 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:12:44,430 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:12:44,430 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:12:44,431 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:12:44,436 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:44,439 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:12:44,441 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:12:44,441 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:12:44,446 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:12:44,447 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:12:44,447 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:12:44,449 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:12:44,450 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:12:44,451 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:12:44,451 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:12:44,455 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 22:13:04,223 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:13:04,240 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:13:04,702 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:13:04,709 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:13:04,710 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:13:04,710 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:13:04,710 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:13:04,710 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:13:04,710 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:13:04,710 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:13:04,710 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:13:04,710 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:13:04,710 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:13:04,711 - Group['livy'] {}
2025-12-23 22:13:04,717 - Group['spark'] {}
2025-12-23 22:13:04,718 - Group['ranger'] {}
2025-12-23 22:13:04,718 - Group['hdfs'] {}
2025-12-23 22:13:04,719 - Group['hadoop'] {}
2025-12-23 22:13:04,720 - Group['nifi'] {}
2025-12-23 22:13:04,724 - Group['users'] {}
2025-12-23 22:13:04,725 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,726 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,728 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,732 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,733 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,736 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,741 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,743 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,744 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,749 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,750 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,752 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,754 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,757 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,760 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,765 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:13:04,766 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:13:04,778 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:13:04,779 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:13:04,781 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:13:04,782 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:13:04,782 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:13:04,797 - call returned (0, '1015')
2025-12-23 22:13:04,797 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:13:04,808 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:13:04,809 - Group['hdfs'] {}
2025-12-23 22:13:04,812 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:04,813 - FS Type: HDFS
2025-12-23 22:13:04,813 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:13:04,832 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:13:04,836 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:13:04,849 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:13:04,853 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:13:04,853 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:13:04,944 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:13:04,949 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:13:04,969 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:13:04,969 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:13:04,978 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:13:04,979 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:13:04,979 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:13:04,985 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:13:04,985 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:13:04,997 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:13:05,001 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:13:05,001 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:13:05,009 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:13:05,016 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:13:05,020 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:13:05,032 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:13:05,036 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:13:05,048 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:13:05,048 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:13:05,060 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:13:05,064 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:13:05,065 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:13:05,065 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:13:05,072 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:13:05,081 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:13:05,090 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:13:05,091 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:13:05,092 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:13:05,102 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:13:07,093 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:13:07,126 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:13:07,133 - Changing owner of package files
2025-12-23 22:13:07,133 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:13:07,145 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:13:07,145 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:13:07,146 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:13:07,146 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,149 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,150 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,153 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,153 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,154 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,157 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,158 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,161 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,169 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,173 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:07,175 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:13:07,181 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:13:07,182 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:13:07,192 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:13:07,192 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:13:07,988 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:13:07,995 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:13:07,996 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:13:07,999 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:13:07,999 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:13:07,999 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:13:08,003 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:13:08,018 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:13:08,027 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:13:08,049 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:13:08,059 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:13:08,064 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:13:08,074 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:43228, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:13:08,085 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350022, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:13:08,102 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:13:08,418 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:13:07,988 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:13:07,995 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:13:07,996 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:13:07,999 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:13:07,999 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:13:07,999 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:13:08,000 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:13:08,003 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:13:08,018 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:13:08,027 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:13:08,049 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:13:08,059 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:13:08,064 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:13:08,074 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:43228, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:13:08,085 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350022, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:13:08,102 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:13:08,419 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:13:08,420 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:13:08,424 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:13:08,424 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:13:08,468 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:13:08,475 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:13:08,476 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:13:08,476 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:13:08,479 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:13:08,479 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:13:08,485 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:13:08,486 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:13:08,486 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:13:08,489 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:13:08,490 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:13:08,495 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:13:08,497 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:13:08,497 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:13:08,499 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:13:08,500 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:13:08,505 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:13:08,506 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:13:08,506 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:13:08,511 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:13:08,515 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:13:08,517 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:13:08,517 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:13:08,525 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:13:08,526 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:13:08,526 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:13:08,530 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:13:08,531 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:13:08,531 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:13:08,531 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:13:08,535 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 22:13:44,378 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:13:44,386 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:13:44,605 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:13:44,607 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:13:44,608 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:13:44,608 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:13:44,608 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:13:44,608 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:13:44,608 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:13:44,608 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:13:44,608 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:13:44,608 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:13:44,608 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:13:44,609 - Group['livy'] {}
2025-12-23 22:13:44,611 - Group['spark'] {}
2025-12-23 22:13:44,612 - Group['ranger'] {}
2025-12-23 22:13:44,613 - Group['hdfs'] {}
2025-12-23 22:13:44,613 - Group['hadoop'] {}
2025-12-23 22:13:44,614 - Group['nifi'] {}
2025-12-23 22:13:44,614 - Group['users'] {}
2025-12-23 22:13:44,615 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,616 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,618 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,619 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,621 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,622 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,624 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,625 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,627 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,628 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,630 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,631 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,633 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,634 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,635 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,637 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:13:44,638 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:13:44,644 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:13:44,644 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:13:44,645 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:13:44,646 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:13:44,646 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:13:44,654 - call returned (0, '1015')
2025-12-23 22:13:44,654 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:13:44,659 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:13:44,660 - Group['hdfs'] {}
2025-12-23 22:13:44,661 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:13:44,662 - FS Type: HDFS
2025-12-23 22:13:44,662 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:13:44,671 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:13:44,672 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:13:44,677 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:13:44,678 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:13:44,678 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:13:44,717 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:13:44,717 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:13:44,729 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:13:44,730 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:13:44,740 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:13:44,740 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:13:44,741 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:13:44,743 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:13:44,744 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:13:44,749 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:13:44,751 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:13:44,751 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:13:44,756 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:13:44,762 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:13:44,762 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:13:44,767 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:13:44,768 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:13:44,774 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:13:44,775 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:13:44,779 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:13:44,780 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:13:44,781 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:13:44,781 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:13:44,785 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:13:44,789 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:13:44,794 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:13:44,795 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:13:44,796 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:13:44,801 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:13:46,088 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:13:46,105 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:13:46,108 - Changing owner of package files
2025-12-23 22:13:46,108 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:13:46,114 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:13:46,114 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:13:46,114 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:13:46,115 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,115 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,116 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,117 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,118 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,119 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,120 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,121 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,122 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,126 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,127 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:13:46,128 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:13:46,131 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:13:46,132 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:13:46,138 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:13:46,138 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:13:46,739 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:13:46,743 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:13:46,743 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:13:46,745 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:13:46,747 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:13:46,747 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:13:46,747 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:13:46,747 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:13:46,750 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:13:46,761 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:13:46,767 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:13:46,779 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:13:46,785 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:13:46,786 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:13:46,796 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:56274, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:13:46,807 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350023, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:13:46,819 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:13:47,135 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:13:46,739 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:13:46,743 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:13:46,743 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:13:46,744 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:13:46,745 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:13:46,747 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:13:46,747 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:13:46,747 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:13:46,747 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:13:46,748 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:13:46,750 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:13:46,761 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:13:46,767 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:13:46,779 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:13:46,785 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:13:46,786 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:13:46,796 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:56274, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:13:46,807 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350023, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:13:46,819 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:13:47,136 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:13:47,136 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:13:47,141 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:13:47,141 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:13:47,185 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:13:47,191 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:13:47,193 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:13:47,193 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:13:47,196 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:13:47,196 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:13:47,202 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:13:47,203 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:13:47,203 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:13:47,206 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:13:47,207 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:13:47,213 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:13:47,213 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:13:47,214 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:13:47,217 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:13:47,217 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:13:47,223 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:13:47,224 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:13:47,224 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:13:47,229 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:13:47,233 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:13:47,235 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:13:47,235 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:13:47,242 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:13:47,243 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:13:47,244 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:13:47,247 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:13:47,248 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:13:47,248 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:13:47,248 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:13:47,253 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 22:14:55,559 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:14:55,567 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:14:55,784 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:14:55,786 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:14:55,787 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:14:55,787 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:14:55,787 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:14:55,787 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:14:55,787 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:14:55,787 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:14:55,787 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:14:55,787 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:14:55,787 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:14:55,787 - Group['livy'] {}
2025-12-23 22:14:55,790 - Group['spark'] {}
2025-12-23 22:14:55,791 - Group['ranger'] {}
2025-12-23 22:14:55,792 - Group['hdfs'] {}
2025-12-23 22:14:55,792 - Group['hadoop'] {}
2025-12-23 22:14:55,793 - Group['nifi'] {}
2025-12-23 22:14:55,794 - Group['users'] {}
2025-12-23 22:14:55,794 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,796 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,797 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,799 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,800 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,802 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,803 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,804 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,806 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,807 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,809 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,810 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,812 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,813 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,815 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,816 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:14:55,817 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:14:55,824 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:14:55,824 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:14:55,825 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:14:55,826 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:14:55,826 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:14:55,834 - call returned (0, '1015')
2025-12-23 22:14:55,835 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:14:55,840 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:14:55,841 - Group['hdfs'] {}
2025-12-23 22:14:55,842 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:14:55,843 - FS Type: HDFS
2025-12-23 22:14:55,843 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:14:55,852 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:14:55,853 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:14:55,858 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:14:55,859 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:14:55,859 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:14:55,899 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:14:55,900 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:14:55,913 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:14:55,914 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:14:55,918 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:14:55,918 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:14:55,919 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:14:55,922 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:14:55,922 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:14:55,928 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:14:55,931 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:14:55,931 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:14:55,937 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:14:55,942 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:14:55,943 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:14:55,948 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:14:55,949 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:14:55,955 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:14:55,956 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:14:55,961 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:14:55,962 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:14:55,962 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:14:55,963 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:14:55,967 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:14:55,972 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:14:55,977 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:14:55,977 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:14:55,978 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:14:55,983 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:14:57,647 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:14:57,664 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:14:57,666 - Changing owner of package files
2025-12-23 22:14:57,667 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:14:57,673 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:14:57,673 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:14:57,673 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:14:57,673 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,674 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,675 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,676 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,677 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,677 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,678 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,679 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,680 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,685 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,686 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:14:57,686 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:14:57,690 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:14:57,690 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:14:57,696 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:14:57,696 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:14:58,159 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:14:58,164 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:14:58,164 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:14:58,164 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:14:58,164 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:14:58,171 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:14:58,178 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:14:58,185 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:14:58,199 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:14:58,206 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:14:58,206 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:14:58,215 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:34358, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:14:58,225 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350027, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:14:58,244 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:14:58,560 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:14:58,159 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:14:58,164 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:14:58,164 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:14:58,164 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:14:58,164 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:14:58,165 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:14:58,171 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:14:58,178 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:14:58,185 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:14:58,199 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:14:58,206 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:14:58,206 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:14:58,215 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:34358, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:14:58,225 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350027, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:14:58,244 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:14:58,561 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:14:58,562 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:14:58,566 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:14:58,566 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:14:58,610 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:14:58,616 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:14:58,617 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:14:58,618 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:14:58,621 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:14:58,621 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:14:58,627 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:14:58,628 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:14:58,628 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:14:58,631 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:14:58,632 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:14:58,637 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:14:58,638 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:14:58,638 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:14:58,641 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:14:58,641 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:14:58,646 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:14:58,647 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:14:58,647 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:14:58,653 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:14:58,657 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:14:58,658 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:14:58,659 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:14:58,664 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:14:58,665 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:14:58,665 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:14:58,667 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:14:58,668 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:14:58,668 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:14:58,669 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:14:58,672 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 22:17:11,199 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:17:11,207 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:17:11,431 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:17:11,433 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:17:11,434 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:17:11,434 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:17:11,434 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:17:11,434 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:17:11,434 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:17:11,434 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:17:11,434 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:17:11,434 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:17:11,434 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:17:11,435 - Group['livy'] {}
2025-12-23 22:17:11,438 - Group['spark'] {}
2025-12-23 22:17:11,438 - Group['ranger'] {}
2025-12-23 22:17:11,439 - Group['hdfs'] {}
2025-12-23 22:17:11,440 - Group['hadoop'] {}
2025-12-23 22:17:11,440 - Group['nifi'] {}
2025-12-23 22:17:11,441 - Group['users'] {}
2025-12-23 22:17:11,442 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,443 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,445 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,446 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,447 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,449 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,451 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,453 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,454 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,456 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,457 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,459 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,460 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,462 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,463 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,465 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:17:11,465 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:17:11,472 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:17:11,472 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:17:11,474 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:17:11,474 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:17:11,474 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:17:11,482 - call returned (0, '1015')
2025-12-23 22:17:11,483 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:17:11,489 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:17:11,489 - Group['hdfs'] {}
2025-12-23 22:17:11,490 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:17:11,491 - FS Type: HDFS
2025-12-23 22:17:11,491 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:17:11,501 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:17:11,501 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:17:11,507 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:17:11,508 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:17:11,508 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:17:11,547 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:17:11,547 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:17:11,559 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:17:11,560 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:17:11,564 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:17:11,565 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:17:11,565 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:17:11,568 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:17:11,568 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:17:11,574 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:17:11,576 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:17:11,576 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:17:11,581 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:17:11,586 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:17:11,587 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:17:11,592 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:17:11,593 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:17:11,599 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:17:11,600 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:17:11,606 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:17:11,607 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:17:11,607 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:17:11,608 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:17:11,611 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:17:11,616 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:17:11,622 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:17:11,623 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:17:11,623 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:17:11,628 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:17:13,700 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:17:13,716 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:17:13,719 - Changing owner of package files
2025-12-23 22:17:13,719 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:17:13,725 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:17:13,725 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:17:13,725 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:17:13,726 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,726 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,727 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,728 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,729 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,730 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,731 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,732 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,733 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,737 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,738 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:17:13,739 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:17:13,742 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:17:13,742 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:17:13,748 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:17:13,748 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:17:14,306 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:17:14,312 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:17:14,312 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:17:14,312 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:17:14,312 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:17:14,313 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:17:14,318 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:17:14,328 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:17:14,334 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:17:14,345 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:17:14,352 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:17:14,353 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:17:14,362 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:38216, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:17:14,377 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350028, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:17:14,393 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:17:14,708 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:17:14,306 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:17:14,311 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:17:14,312 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:17:14,312 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:17:14,312 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:17:14,312 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:17:14,313 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:17:14,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:17:14,318 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:17:14,328 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:17:14,334 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:17:14,345 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:17:14,352 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:17:14,353 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:17:14,362 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:38216, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:17:14,377 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350028, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:17:14,393 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:17:14,709 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:17:14,710 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:17:14,714 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:17:14,714 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:17:14,766 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:17:14,777 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:17:14,780 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:17:14,780 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:17:14,783 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:17:14,784 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:17:14,797 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:17:14,797 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:17:14,798 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:17:14,805 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:17:14,805 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:17:14,817 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:17:14,818 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:17:14,818 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:17:14,825 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:17:14,825 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:17:14,833 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:17:14,836 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:17:14,836 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:17:14,851 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:17:14,855 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:17:14,861 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:17:14,862 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:17:14,870 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:17:14,872 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:17:14,872 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:17:14,874 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:17:14,880 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:17:14,880 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:17:14,880 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:17:14,886 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 22:21:40,801 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:21:40,809 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:21:41,024 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:21:41,027 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:21:41,027 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:21:41,027 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:21:41,027 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:21:41,028 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:21:41,028 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:21:41,028 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:21:41,028 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:21:41,028 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:21:41,028 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:21:41,028 - Group['livy'] {}
2025-12-23 22:21:41,031 - Group['spark'] {}
2025-12-23 22:21:41,031 - Group['ranger'] {}
2025-12-23 22:21:41,032 - Group['hdfs'] {}
2025-12-23 22:21:41,032 - Group['hadoop'] {}
2025-12-23 22:21:41,033 - Group['nifi'] {}
2025-12-23 22:21:41,034 - Group['users'] {}
2025-12-23 22:21:41,034 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,036 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,037 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,039 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,040 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,042 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,043 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,045 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,046 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,048 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,049 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,051 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,052 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,053 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,055 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,056 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:21:41,057 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:21:41,063 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:21:41,063 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:21:41,064 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:21:41,065 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:21:41,065 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:21:41,072 - call returned (0, '1015')
2025-12-23 22:21:41,073 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:21:41,077 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:21:41,078 - Group['hdfs'] {}
2025-12-23 22:21:41,079 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:21:41,080 - FS Type: HDFS
2025-12-23 22:21:41,080 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:21:41,089 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:21:41,089 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:21:41,096 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:21:41,096 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:21:41,097 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:21:41,135 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:21:41,135 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:21:41,147 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:21:41,147 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:21:41,151 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:21:41,152 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:21:41,152 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:21:41,154 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:21:41,155 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:21:41,160 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:21:41,162 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:21:41,162 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:21:41,167 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:21:41,171 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:21:41,172 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:21:41,177 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:21:41,177 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:21:41,184 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:21:41,184 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:21:41,188 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:21:41,189 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:21:41,190 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:21:41,190 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:21:41,194 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:21:41,198 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:21:41,203 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:21:41,204 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:21:41,205 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:21:41,209 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:21:43,797 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:21:43,817 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:21:43,820 - Changing owner of package files
2025-12-23 22:21:43,820 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:21:43,826 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:21:43,826 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:21:43,826 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:21:43,827 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,828 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,829 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,829 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,830 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,831 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,832 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,833 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,834 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,838 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,839 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:21:43,840 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:21:43,843 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:21:43,844 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:21:43,850 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:21:43,850 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:21:44,328 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:21:44,335 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:21:44,335 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:21:44,335 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:21:44,335 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:21:44,340 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:21:44,348 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:21:44,353 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:21:44,365 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:21:44,371 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:21:44,374 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:21:44,383 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:48370, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:21:44,398 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350029, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:21:44,411 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:21:44,726 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:21:44,328 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:21:44,334 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:21:44,335 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:21:44,335 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:21:44,335 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:21:44,335 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:21:44,340 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:21:44,348 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:21:44,353 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:21:44,365 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:21:44,371 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:21:44,374 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:21:44,383 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:48370, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:21:44,398 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c350029, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:21:44,411 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:21:44,727 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:21:44,728 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:21:44,732 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:21:44,732 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:21:44,776 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:21:44,782 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:21:44,783 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:21:44,783 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:21:44,786 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:21:44,787 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:21:44,792 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:21:44,793 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:21:44,793 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:21:44,797 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:21:44,797 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:21:44,803 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:21:44,804 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:21:44,804 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:21:44,806 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:21:44,807 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:21:44,812 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:21:44,813 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:21:44,813 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:21:44,818 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:21:44,822 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:21:44,824 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:21:44,824 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:21:44,829 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:21:44,830 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:21:44,830 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:21:44,833 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:21:44,833 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:21:44,833 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:21:44,834 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:21:44,837 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 22:22:10,571 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:22:10,579 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:22:10,793 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:22:10,796 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 22:22:10,797 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 22:22:10,797 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 22:22:10,797 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 22:22:10,797 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:22:10,797 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 22:22:10,797 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 22:22:10,797 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 22:22:10,797 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:22:10,797 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 22:22:10,797 - Group['livy'] {}
2025-12-23 22:22:10,800 - Group['spark'] {}
2025-12-23 22:22:10,801 - Group['ranger'] {}
2025-12-23 22:22:10,801 - Group['hdfs'] {}
2025-12-23 22:22:10,802 - Group['hadoop'] {}
2025-12-23 22:22:10,803 - Group['nifi'] {}
2025-12-23 22:22:10,803 - Group['users'] {}
2025-12-23 22:22:10,804 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,806 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,807 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,809 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,810 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,812 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,813 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,815 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,816 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,818 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,819 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,821 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,822 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,823 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,825 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,826 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:22:10,827 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 22:22:10,833 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 22:22:10,834 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 22:22:10,835 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:22:10,835 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 22:22:10,836 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 22:22:10,843 - call returned (0, '1015')
2025-12-23 22:22:10,844 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 22:22:10,850 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 22:22:10,850 - Group['hdfs'] {}
2025-12-23 22:22:10,852 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 22:22:10,853 - FS Type: HDFS
2025-12-23 22:22:10,853 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 22:22:10,862 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:22:10,863 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 22:22:10,869 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 22:22:10,870 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 22:22:10,870 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 22:22:10,910 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 22:22:10,910 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 22:22:10,923 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 22:22:10,923 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 22:22:10,927 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 22:22:10,928 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:22:10,928 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 22:22:10,931 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 22:22:10,931 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 22:22:10,936 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 22:22:10,939 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 22:22:10,939 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 22:22:10,944 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 22:22:10,951 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 22:22:10,951 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 22:22:10,956 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 22:22:10,957 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 22:22:10,964 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 22:22:10,964 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 22:22:10,969 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 22:22:10,970 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 22:22:10,970 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 22:22:10,971 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 22:22:10,974 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:22:10,979 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 22:22:10,984 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 22:22:10,985 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 22:22:10,985 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 22:22:10,990 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 22:22:14,129 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 22:22:14,148 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:22:14,151 - Changing owner of package files
2025-12-23 22:22:14,151 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 22:22:14,157 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 22:22:14,157 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 22:22:14,158 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 22:22:14,158 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,159 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,160 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,161 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,162 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,162 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,163 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,164 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,165 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,170 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,170 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 22:22:14,171 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 22:22:14,175 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 22:22:14,176 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 22:22:14,181 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 22:22:14,182 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 22:22:14,651 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 22:22:14,655 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 22:22:14,655 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 22:22:14,655 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 22:22:14,657 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 22:22:14,657 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 22:22:14,657 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 22:22:14,657 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 22:22:14,660 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 22:22:14,668 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 22:22:14,674 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 22:22:14,687 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 22:22:14,695 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 22:22:14,696 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 22:22:14,702 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:50998, server: node2.cdp/10.0.0.4:2181
2025-12-23 22:22:14,714 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c35002a, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 22:22:14,729 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 22:22:15,044 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 22:22:14,651 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 22:22:14,655 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 22:22:14,655 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 22:22:14,655 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 22:22:14,656 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 22:22:14,657 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 22:22:14,657 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 22:22:14,657 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 22:22:14,657 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 22:22:14,660 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 22:22:14,668 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 22:22:14,674 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 22:22:14,687 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 22:22:14,695 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 22:22:14,696 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 22:22:14,702 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:50998, server: node2.cdp/10.0.0.4:2181\n2025-12-23 22:22:14,714 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c7c35002a, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 22:22:14,729 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 22:22:15,045 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 22:22:15,046 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 22:22:15,050 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 22:22:15,050 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 22:22:15,094 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 22:22:15,101 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:22:15,102 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 22:22:15,102 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 22:22:15,105 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:22:15,105 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 22:22:15,111 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:22:15,112 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 22:22:15,112 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 22:22:15,115 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:22:15,115 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 22:22:15,121 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:22:15,122 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 22:22:15,122 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 22:22:15,125 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:22:15,125 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 22:22:15,131 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:22:15,132 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 22:22:15,132 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 22:22:15,137 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:22:15,141 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 22:22:15,143 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 22:22:15,143 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 22:22:15,148 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:22:15,149 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 22:22:15,149 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 22:22:15,152 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 22:22:15,153 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 22:22:15,153 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 22:22:15,153 - Encrypting NiFi sensitive configuration properties
2025-12-23 22:22:15,157 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}

Command failed after 10 tries
