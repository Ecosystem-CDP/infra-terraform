node1.cdp:

stderr: 
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
 stdout:
2025-12-23 15:07:44,684 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:07:44,692 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:07:44,908 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:07:44,910 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:07:44,911 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:07:44,911 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:07:44,911 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:07:44,911 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:07:44,911 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:07:44,911 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:07:44,911 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:07:44,911 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:07:44,911 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:07:44,911 - Group['livy'] {}
2025-12-23 15:07:44,914 - Group['spark'] {}
2025-12-23 15:07:44,914 - Group['ranger'] {}
2025-12-23 15:07:44,915 - Group['hdfs'] {}
2025-12-23 15:07:44,916 - Group['hadoop'] {}
2025-12-23 15:07:44,916 - Group['nifi'] {}
2025-12-23 15:07:44,917 - Group['users'] {}
2025-12-23 15:07:44,917 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,919 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,920 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,922 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,923 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,925 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,926 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,927 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,929 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,930 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,931 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,933 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,934 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,935 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,937 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,938 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:07:44,939 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:07:44,945 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:07:44,945 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:07:44,946 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:07:44,947 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:07:44,947 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:07:44,955 - call returned (0, '1015')
2025-12-23 15:07:44,956 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:07:44,961 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:07:44,962 - Group['hdfs'] {}
2025-12-23 15:07:44,963 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:44,964 - FS Type: HDFS
2025-12-23 15:07:44,964 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:07:44,973 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:07:44,974 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:07:44,980 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:07:44,981 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:07:44,981 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:07:45,025 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:07:45,026 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:07:45,045 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:07:45,046 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:07:45,050 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:07:45,050 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:07:45,050 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:07:45,053 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:07:45,053 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:07:45,059 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:07:45,063 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:07:45,063 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:07:45,072 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:07:45,077 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:07:45,078 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:07:45,083 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:07:45,084 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:07:45,090 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:07:45,091 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:07:45,096 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:07:45,097 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:07:45,098 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:07:45,098 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:07:45,102 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:07:45,107 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:07:45,112 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:07:45,113 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:07:45,114 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:07:45,118 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:07:45,511 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:07:45,529 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:07:45,533 - Changing owner of package files
2025-12-23 15:07:45,533 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:07:45,539 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:07:45,539 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:07:45,539 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:07:45,540 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,541 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,542 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,542 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,543 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,544 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,545 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,546 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,546 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,551 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,552 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:45,553 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:07:45,556 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:07:45,556 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:07:45,562 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:07:45,563 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:07:46,052 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:07:46,058 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:07:46,058 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:07:46,060 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:07:46,063 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:07:46,076 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:07:46,083 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:07:46,093 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:07:46,099 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:07:46,101 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:07:46,109 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:54580, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:07:46,122 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0025, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:07:46,134 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:07:46,450 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:07:46,052 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:07:46,057 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:07:46,058 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:07:46,058 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:07:46,060 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:07:46,061 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:07:46,063 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:07:46,076 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:07:46,083 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:07:46,093 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:07:46,099 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:07:46,101 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:07:46,109 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:54580, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:07:46,122 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0025, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:07:46,134 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:07:46,451 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:07:46,453 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:07:46,458 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:07:46,458 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:07:46,500 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:07:46,506 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:07:46,508 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:07:46,508 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:07:46,511 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:07:46,512 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:07:46,518 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:07:46,519 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:07:46,519 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:07:46,523 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:07:46,525 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:07:46,531 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:07:46,533 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:07:46,533 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:07:46,536 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:07:46,537 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:07:46,543 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:07:46,544 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:07:46,544 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:07:46,550 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:07:46,554 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:07:46,557 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:07:46,557 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:07:46,564 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:07:46,565 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:07:46,565 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:07:46,567 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:07:46,569 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:07:46,569 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:07:46,569 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:07:46,573 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 15:07:51,781 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:07:51,789 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:07:52,007 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:07:52,010 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:07:52,010 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:07:52,010 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:07:52,010 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:07:52,010 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:07:52,010 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:07:52,011 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:07:52,011 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:07:52,011 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:07:52,011 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:07:52,011 - Group['livy'] {}
2025-12-23 15:07:52,013 - Group['spark'] {}
2025-12-23 15:07:52,014 - Group['ranger'] {}
2025-12-23 15:07:52,015 - Group['hdfs'] {}
2025-12-23 15:07:52,015 - Group['hadoop'] {}
2025-12-23 15:07:52,016 - Group['nifi'] {}
2025-12-23 15:07:52,017 - Group['users'] {}
2025-12-23 15:07:52,017 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,019 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,020 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,022 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,023 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,025 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,026 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,027 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,029 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,030 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,032 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,033 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,036 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,037 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,039 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,040 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:07:52,041 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:07:52,047 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:07:52,048 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:07:52,049 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:07:52,050 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:07:52,050 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:07:52,058 - call returned (0, '1015')
2025-12-23 15:07:52,059 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:07:52,066 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:07:52,066 - Group['hdfs'] {}
2025-12-23 15:07:52,068 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:07:52,069 - FS Type: HDFS
2025-12-23 15:07:52,069 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:07:52,078 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:07:52,079 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:07:52,085 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:07:52,086 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:07:52,086 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:07:52,129 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:07:52,130 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:07:52,143 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:07:52,143 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:07:52,147 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:07:52,148 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:07:52,148 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:07:52,151 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:07:52,151 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:07:52,157 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:07:52,159 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:07:52,160 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:07:52,166 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:07:52,174 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:07:52,174 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:07:52,181 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:07:52,182 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:07:52,188 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:07:52,189 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:07:52,194 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:07:52,195 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:07:52,196 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:07:52,196 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:07:52,201 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:07:52,206 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:07:52,211 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:07:52,212 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:07:52,213 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:07:52,218 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:07:52,657 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:07:52,674 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:07:52,677 - Changing owner of package files
2025-12-23 15:07:52,677 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:07:52,683 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:07:52,683 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:07:52,683 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:07:52,683 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,684 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,685 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,686 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,687 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,687 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,688 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,689 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,690 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,694 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,695 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:07:52,696 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:07:52,699 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:07:52,699 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:07:52,705 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:07:52,705 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:07:53,187 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:07:53,195 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:07:53,206 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:07:53,213 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:07:53,227 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:07:53,234 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:07:53,236 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:07:53,242 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:40914, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:07:53,251 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0026, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:07:53,264 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:07:53,580 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:07:53,187 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:07:53,192 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:07:53,193 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:07:53,195 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:07:53,206 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:07:53,213 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:07:53,227 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:07:53,234 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:07:53,236 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:07:53,242 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:40914, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:07:53,251 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0026, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:07:53,264 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:07:53,581 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:07:53,581 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:07:53,585 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:07:53,586 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:07:53,627 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:07:53,633 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:07:53,634 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:07:53,634 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:07:53,637 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:07:53,638 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:07:53,642 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:07:53,643 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:07:53,643 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:07:53,647 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:07:53,647 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:07:53,652 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:07:53,653 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:07:53,653 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:07:53,656 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:07:53,656 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:07:53,662 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:07:53,662 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:07:53,663 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:07:53,668 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:07:53,671 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:07:53,673 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:07:53,673 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:07:53,679 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:07:53,680 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:07:53,680 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:07:53,682 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:07:53,683 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:07:53,683 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:07:53,683 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:07:53,687 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 15:08:03,729 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:08:03,737 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:08:03,957 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:08:03,960 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:08:03,961 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:08:03,961 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:08:03,961 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:08:03,961 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:08:03,961 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:08:03,961 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:08:03,961 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:08:03,961 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:08:03,961 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:08:03,961 - Group['livy'] {}
2025-12-23 15:08:03,963 - Group['spark'] {}
2025-12-23 15:08:03,964 - Group['ranger'] {}
2025-12-23 15:08:03,965 - Group['hdfs'] {}
2025-12-23 15:08:03,965 - Group['hadoop'] {}
2025-12-23 15:08:03,966 - Group['nifi'] {}
2025-12-23 15:08:03,966 - Group['users'] {}
2025-12-23 15:08:03,967 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,969 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,970 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,971 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,973 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,974 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,975 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,977 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,978 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,980 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,981 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,983 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,984 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,985 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,987 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:03,988 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:08:03,989 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:08:03,995 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:08:03,995 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:08:03,996 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:08:03,997 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:08:03,997 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:08:04,005 - call returned (0, '1015')
2025-12-23 15:08:04,006 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:08:04,011 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:08:04,012 - Group['hdfs'] {}
2025-12-23 15:08:04,013 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:04,014 - FS Type: HDFS
2025-12-23 15:08:04,015 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:08:04,025 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:08:04,025 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:08:04,033 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:08:04,034 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:08:04,035 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:08:04,080 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:08:04,081 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:08:04,093 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:08:04,093 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:08:04,098 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:08:04,098 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:08:04,099 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:08:04,102 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:08:04,102 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:08:04,108 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:08:04,110 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:08:04,111 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:08:04,116 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:08:04,121 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:08:04,122 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:08:04,127 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:08:04,128 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:08:04,135 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:08:04,135 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:08:04,141 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:08:04,142 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:08:04,142 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:08:04,143 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:08:04,147 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:08:04,152 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:08:04,157 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:08:04,158 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:08:04,158 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:08:04,164 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:08:04,719 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:08:04,736 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:08:04,738 - Changing owner of package files
2025-12-23 15:08:04,739 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:08:04,744 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:08:04,744 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:08:04,744 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:08:04,745 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,746 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,746 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,747 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,748 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,749 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,750 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,750 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,751 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,755 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,756 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:04,757 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:08:04,760 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:08:04,760 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:08:04,766 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:08:04,766 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:08:05,267 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:08:05,269 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:08:05,271 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:08:05,271 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:08:05,271 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:08:05,271 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:08:05,276 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:08:05,286 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:08:05,291 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:08:05,305 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:08:05,310 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:08:05,312 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:08:05,320 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:59428, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:08:05,334 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0027, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:08:05,348 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:08:05,664 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:08:05,267 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:08:05,269 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:08:05,270 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:08:05,271 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:08:05,271 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:08:05,271 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:08:05,271 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:08:05,276 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:08:05,286 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:08:05,291 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:08:05,305 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:08:05,310 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:08:05,312 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:08:05,320 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:59428, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:08:05,334 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0027, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:08:05,348 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:08:05,665 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:08:05,666 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:08:05,670 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:08:05,670 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:08:05,710 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:08:05,716 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:08:05,717 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:08:05,717 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:08:05,720 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:08:05,721 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:08:05,726 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:08:05,727 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:08:05,727 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:08:05,730 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:08:05,730 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:08:05,736 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:08:05,737 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:08:05,737 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:08:05,740 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:08:05,740 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:08:05,745 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:08:05,746 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:08:05,746 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:08:05,752 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:08:05,755 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:08:05,757 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:08:05,758 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:08:05,763 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:08:05,764 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:08:05,764 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:08:05,767 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:08:05,767 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:08:05,768 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:08:05,768 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:08:05,771 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 15:08:16,952 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:08:16,959 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:08:17,175 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:08:17,178 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:08:17,179 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:08:17,179 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:08:17,179 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:08:17,179 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:08:17,179 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:08:17,179 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:08:17,179 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:08:17,179 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:08:17,179 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:08:17,179 - Group['livy'] {}
2025-12-23 15:08:17,182 - Group['spark'] {}
2025-12-23 15:08:17,183 - Group['ranger'] {}
2025-12-23 15:08:17,183 - Group['hdfs'] {}
2025-12-23 15:08:17,184 - Group['hadoop'] {}
2025-12-23 15:08:17,184 - Group['nifi'] {}
2025-12-23 15:08:17,185 - Group['users'] {}
2025-12-23 15:08:17,186 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,187 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,189 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,190 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,191 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,193 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,194 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,195 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,200 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,201 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,202 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,204 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,206 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,208 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,209 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,210 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:08:17,211 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:08:17,217 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:08:17,218 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:08:17,219 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:08:17,220 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:08:17,220 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:08:17,227 - call returned (0, '1015')
2025-12-23 15:08:17,228 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:08:17,234 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:08:17,235 - Group['hdfs'] {}
2025-12-23 15:08:17,236 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:17,237 - FS Type: HDFS
2025-12-23 15:08:17,237 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:08:17,246 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:08:17,246 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:08:17,252 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:08:17,253 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:08:17,253 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:08:17,290 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:08:17,291 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:08:17,304 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:08:17,304 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:08:17,308 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:08:17,309 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:08:17,309 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:08:17,312 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:08:17,312 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:08:17,318 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:08:17,320 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:08:17,320 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:08:17,326 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:08:17,331 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:08:17,331 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:08:17,337 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:08:17,338 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:08:17,345 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:08:17,345 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:08:17,351 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:08:17,352 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:08:17,352 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:08:17,353 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:08:17,356 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:08:17,362 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:08:17,367 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:08:17,368 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:08:17,368 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:08:17,373 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:08:18,108 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:08:18,126 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:08:18,129 - Changing owner of package files
2025-12-23 15:08:18,129 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:08:18,134 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:08:18,135 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:08:18,135 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:08:18,135 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,136 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,137 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,138 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,138 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,139 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,140 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,141 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,142 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,146 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,147 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:18,148 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:08:18,151 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:08:18,151 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:08:18,157 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:08:18,157 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:08:18,619 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:08:18,626 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:08:18,626 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:08:18,631 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:08:18,639 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:08:18,648 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:08:18,659 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:08:18,664 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:08:18,668 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:08:18,674 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:33942, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:08:18,686 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0028, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:08:18,704 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:08:19,020 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:08:18,619 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:08:18,625 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:08:18,626 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:08:18,626 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:08:18,631 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:08:18,639 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:08:18,648 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:08:18,659 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:08:18,664 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:08:18,668 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:08:18,674 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:33942, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:08:18,686 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0028, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:08:18,704 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:08:19,021 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:08:19,021 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:08:19,026 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:08:19,026 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:08:19,069 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:08:19,075 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:08:19,076 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:08:19,076 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:08:19,079 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:08:19,080 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:08:19,086 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:08:19,086 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:08:19,087 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:08:19,090 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:08:19,090 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:08:19,096 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:08:19,097 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:08:19,097 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:08:19,100 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:08:19,100 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:08:19,106 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:08:19,107 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:08:19,107 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:08:19,113 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:08:19,117 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:08:19,118 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:08:19,119 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:08:19,125 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:08:19,126 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:08:19,126 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:08:19,128 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:08:19,130 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:08:19,130 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:08:19,130 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:08:19,134 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 15:08:38,946 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:08:38,954 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:08:39,172 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:08:39,175 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:08:39,176 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:08:39,176 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:08:39,176 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:08:39,176 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:08:39,176 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:08:39,176 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:08:39,176 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:08:39,176 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:08:39,176 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:08:39,176 - Group['livy'] {}
2025-12-23 15:08:39,179 - Group['spark'] {}
2025-12-23 15:08:39,179 - Group['ranger'] {}
2025-12-23 15:08:39,180 - Group['hdfs'] {}
2025-12-23 15:08:39,181 - Group['hadoop'] {}
2025-12-23 15:08:39,181 - Group['nifi'] {}
2025-12-23 15:08:39,182 - Group['users'] {}
2025-12-23 15:08:39,183 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,184 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,186 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,187 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,189 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,191 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,192 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,194 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,195 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,197 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,198 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,199 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,201 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,202 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,203 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,205 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:08:39,206 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:08:39,212 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:08:39,212 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:08:39,213 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:08:39,214 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:08:39,214 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:08:39,222 - call returned (0, '1015')
2025-12-23 15:08:39,223 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:08:39,229 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:08:39,230 - Group['hdfs'] {}
2025-12-23 15:08:39,231 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:08:39,232 - FS Type: HDFS
2025-12-23 15:08:39,233 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:08:39,242 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:08:39,243 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:08:39,249 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:08:39,250 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:08:39,250 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:08:39,292 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:08:39,293 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:08:39,306 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:08:39,306 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:08:39,310 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:08:39,311 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:08:39,311 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:08:39,314 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:08:39,314 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:08:39,320 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:08:39,323 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:08:39,324 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:08:39,331 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:08:39,337 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:08:39,337 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:08:39,344 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:08:39,345 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:08:39,352 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:08:39,352 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:08:39,358 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:08:39,359 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:08:39,359 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:08:39,360 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:08:39,364 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:08:39,370 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:08:39,376 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:08:39,379 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:08:39,379 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:08:39,385 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:08:40,357 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:08:40,374 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:08:40,377 - Changing owner of package files
2025-12-23 15:08:40,377 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:08:40,385 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:08:40,385 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:08:40,385 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:08:40,385 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,386 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,387 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,388 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,389 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,390 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,391 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,391 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,392 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,397 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,397 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:08:40,398 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:08:40,401 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:08:40,402 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:08:40,408 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:08:40,408 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:08:40,921 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:08:40,928 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:08:40,928 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:08:40,928 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:08:40,928 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:08:40,935 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:08:40,942 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:08:40,949 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:08:40,959 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:08:40,966 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:08:40,970 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:08:40,977 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:41872, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:08:40,988 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0029, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:08:41,002 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:08:41,317 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:08:40,921 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:08:40,928 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:08:40,928 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:08:40,928 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:08:40,928 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:08:40,929 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:08:40,935 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:08:40,942 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:08:40,949 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:08:40,959 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:08:40,966 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:08:40,970 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:08:40,977 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:41872, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:08:40,988 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e0029, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:08:41,002 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:08:41,318 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:08:41,319 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:08:41,323 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:08:41,323 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:08:41,365 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:08:41,371 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:08:41,372 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:08:41,372 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:08:41,375 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:08:41,376 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:08:41,383 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:08:41,383 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:08:41,384 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:08:41,387 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:08:41,387 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:08:41,392 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:08:41,393 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:08:41,393 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:08:41,396 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:08:41,396 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:08:41,401 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:08:41,402 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:08:41,402 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:08:41,408 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:08:41,411 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:08:41,413 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:08:41,413 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:08:41,419 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:08:41,419 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:08:41,419 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:08:41,422 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:08:41,423 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:08:41,423 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:08:41,423 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:08:41,426 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 15:09:17,567 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:09:17,589 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:09:18,049 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:09:18,051 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:09:18,052 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:09:18,052 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:09:18,052 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:09:18,052 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:09:18,052 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:09:18,056 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:09:18,057 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:09:18,057 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:09:18,057 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:09:18,057 - Group['livy'] {}
2025-12-23 15:09:18,064 - Group['spark'] {}
2025-12-23 15:09:18,064 - Group['ranger'] {}
2025-12-23 15:09:18,065 - Group['hdfs'] {}
2025-12-23 15:09:18,069 - Group['hadoop'] {}
2025-12-23 15:09:18,069 - Group['nifi'] {}
2025-12-23 15:09:18,070 - Group['users'] {}
2025-12-23 15:09:18,071 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,072 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,078 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,079 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,081 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,085 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,086 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,088 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,090 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,093 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,098 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,099 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,105 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,106 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,107 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,109 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:09:18,110 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:09:18,121 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:09:18,122 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:09:18,123 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:09:18,123 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:09:18,124 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:09:18,140 - call returned (0, '1015')
2025-12-23 15:09:18,141 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:09:18,151 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:09:18,151 - Group['hdfs'] {}
2025-12-23 15:09:18,153 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:09:18,153 - FS Type: HDFS
2025-12-23 15:09:18,153 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:09:18,173 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:09:18,174 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:09:18,185 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:09:18,186 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:09:18,186 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:09:18,269 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:09:18,269 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:09:18,290 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:09:18,291 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:09:18,302 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:09:18,302 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:09:18,303 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:09:18,309 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:09:18,310 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:09:18,321 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:09:18,323 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:09:18,324 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:09:18,338 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:09:18,350 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:09:18,351 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:09:18,361 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:09:18,365 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:09:18,375 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:09:18,381 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:09:18,391 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:09:18,393 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:09:18,393 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:09:18,397 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:09:18,405 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:09:18,414 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:09:18,426 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:09:18,427 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:09:18,427 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:09:18,437 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:09:19,777 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:09:19,794 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:09:19,797 - Changing owner of package files
2025-12-23 15:09:19,797 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:09:19,803 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:09:19,803 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:09:19,803 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:09:19,803 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,804 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,805 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,806 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,807 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,808 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,809 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,809 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,810 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,814 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,815 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:09:19,816 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:09:19,819 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:09:19,819 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:09:19,826 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:09:19,826 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:09:20,287 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:09:20,293 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:09:20,301 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:09:20,307 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:09:20,317 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:09:20,330 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:09:20,338 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:09:20,339 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:09:20,346 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:50834, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:09:20,358 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002a, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:09:20,373 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:09:20,689 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:09:20,287 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:09:20,292 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:09:20,293 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:09:20,296 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:09:20,301 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:09:20,307 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:09:20,317 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:09:20,330 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:09:20,338 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:09:20,339 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:09:20,346 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:50834, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:09:20,358 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002a, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:09:20,373 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:09:20,690 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:09:20,690 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:09:20,695 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:09:20,695 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:09:20,736 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:09:20,743 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:09:20,744 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:09:20,744 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:09:20,747 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:09:20,748 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:09:20,753 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:09:20,754 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:09:20,754 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:09:20,758 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:09:20,758 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:09:20,764 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:09:20,765 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:09:20,765 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:09:20,768 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:09:20,769 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:09:20,775 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:09:20,776 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:09:20,776 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:09:20,782 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:09:20,785 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:09:20,787 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:09:20,787 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:09:20,793 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:09:20,794 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:09:20,794 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:09:20,797 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:09:20,798 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:09:20,798 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:09:20,798 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:09:20,802 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 15:10:29,377 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:10:29,394 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:10:30,056 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:10:30,063 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:10:30,065 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:10:30,065 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:10:30,065 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:10:30,065 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:10:30,065 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:10:30,066 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:10:30,066 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:10:30,066 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:10:30,066 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:10:30,066 - Group['livy'] {}
2025-12-23 15:10:30,073 - Group['spark'] {}
2025-12-23 15:10:30,074 - Group['ranger'] {}
2025-12-23 15:10:30,074 - Group['hdfs'] {}
2025-12-23 15:10:30,075 - Group['hadoop'] {}
2025-12-23 15:10:30,077 - Group['nifi'] {}
2025-12-23 15:10:30,077 - Group['users'] {}
2025-12-23 15:10:30,078 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,082 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,089 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,091 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,092 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,095 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,097 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,100 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,105 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,106 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,108 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,111 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,113 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,118 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,119 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,120 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:10:30,121 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:10:30,133 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:10:30,133 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:10:30,134 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:10:30,135 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:10:30,135 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:10:30,150 - call returned (0, '1015')
2025-12-23 15:10:30,151 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:10:30,161 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:10:30,162 - Group['hdfs'] {}
2025-12-23 15:10:30,163 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:10:30,165 - FS Type: HDFS
2025-12-23 15:10:30,165 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:10:30,183 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:10:30,183 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:10:30,197 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:10:30,199 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:10:30,200 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:10:30,286 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:10:30,287 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:10:30,310 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:10:30,310 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:10:30,318 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:10:30,318 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:10:30,318 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:10:30,324 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:10:30,324 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:10:30,337 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:10:30,340 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:10:30,340 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:10:30,353 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:10:30,363 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:10:30,363 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:10:30,373 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:10:30,374 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:10:30,389 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:10:30,390 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:10:30,402 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:10:30,405 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:10:30,405 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:10:30,405 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:10:30,417 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:10:30,426 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:10:30,434 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:10:30,437 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:10:30,438 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:10:30,447 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:10:33,774 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:10:33,807 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:10:33,815 - Changing owner of package files
2025-12-23 15:10:33,815 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:10:33,827 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:10:33,827 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:10:33,827 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:10:33,828 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,833 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,834 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,835 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,836 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,837 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,841 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,842 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,843 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,852 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,853 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:10:33,856 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:10:33,859 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:10:33,859 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:10:33,874 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:10:33,874 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:10:34,709 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:10:34,718 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:10:34,718 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:10:34,719 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:10:34,719 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:10:34,719 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:10:34,720 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:10:34,730 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:10:34,735 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:10:34,746 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:10:34,764 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:10:34,780 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:10:34,781 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:10:34,791 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:50608, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:10:34,808 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002b, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:10:34,825 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:10:35,145 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:10:34,709 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:10:34,716 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:10:34,718 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:10:34,718 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:10:34,719 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:10:34,719 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:10:34,719 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:10:34,720 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:10:34,730 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:10:34,735 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:10:34,746 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:10:34,764 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:10:34,780 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:10:34,781 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:10:34,791 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:50608, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:10:34,808 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002b, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:10:34,825 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:10:35,146 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:10:35,146 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:10:35,155 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:10:35,155 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:10:35,250 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:10:35,262 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:10:35,263 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:10:35,263 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:10:35,271 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:10:35,271 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:10:35,286 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:10:35,287 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:10:35,287 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:10:35,295 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:10:35,296 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:10:35,311 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:10:35,312 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:10:35,312 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:10:35,315 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:10:35,316 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:10:35,331 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:10:35,333 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:10:35,333 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:10:35,344 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:10:35,357 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:10:35,359 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:10:35,359 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:10:35,373 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:10:35,374 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:10:35,374 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:10:35,382 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:10:35,385 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:10:35,385 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:10:35,385 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:10:35,393 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 15:12:50,048 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:12:50,057 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:12:50,276 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:12:50,278 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:12:50,279 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:12:50,279 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:12:50,279 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:12:50,279 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:12:50,279 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:12:50,279 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:12:50,279 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:12:50,280 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:12:50,280 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:12:50,280 - Group['livy'] {}
2025-12-23 15:12:50,283 - Group['spark'] {}
2025-12-23 15:12:50,283 - Group['ranger'] {}
2025-12-23 15:12:50,284 - Group['hdfs'] {}
2025-12-23 15:12:50,285 - Group['hadoop'] {}
2025-12-23 15:12:50,285 - Group['nifi'] {}
2025-12-23 15:12:50,286 - Group['users'] {}
2025-12-23 15:12:50,287 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,288 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,289 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,291 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,292 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,294 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,295 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,297 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,298 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,299 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,301 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,302 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,304 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,305 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,306 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,308 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:12:50,309 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:12:50,315 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:12:50,315 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:12:50,316 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:12:50,317 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:12:50,317 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:12:50,324 - call returned (0, '1015')
2025-12-23 15:12:50,325 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:12:50,330 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:12:50,330 - Group['hdfs'] {}
2025-12-23 15:12:50,331 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:12:50,332 - FS Type: HDFS
2025-12-23 15:12:50,332 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:12:50,341 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:12:50,342 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:12:50,347 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:12:50,348 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:12:50,349 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:12:50,389 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:12:50,390 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:12:50,402 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:12:50,403 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:12:50,406 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:12:50,407 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:12:50,407 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:12:50,410 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:12:50,410 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:12:50,416 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:12:50,418 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:12:50,418 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:12:50,424 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:12:50,429 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:12:50,429 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:12:50,435 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:12:50,436 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:12:50,442 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:12:50,442 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:12:50,448 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:12:50,449 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:12:50,449 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:12:50,450 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:12:50,454 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:12:50,459 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:12:50,465 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:12:50,466 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:12:50,466 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:12:50,471 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:12:52,539 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:12:52,557 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:12:52,560 - Changing owner of package files
2025-12-23 15:12:52,560 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:12:52,566 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:12:52,566 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:12:52,566 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:12:52,567 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,568 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,569 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,569 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,570 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,572 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,573 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,573 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,574 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,579 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,579 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:12:52,580 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:12:52,583 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:12:52,584 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:12:52,590 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:12:52,590 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:12:53,083 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:12:53,086 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:12:53,086 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:12:53,086 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:12:53,092 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:12:53,099 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:12:53,106 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:12:53,120 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:12:53,126 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:12:53,128 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:12:53,135 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:56618, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:12:53,159 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002c, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:12:53,172 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:12:53,488 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:12:53,083 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:12:53,086 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:12:53,086 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:12:53,086 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:12:53,087 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:12:53,088 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:12:53,092 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:12:53,099 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:12:53,106 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:12:53,120 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:12:53,126 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:12:53,128 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:12:53,135 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:56618, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:12:53,159 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002c, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:12:53,172 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:12:53,489 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:12:53,490 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:12:53,494 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:12:53,494 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:12:53,544 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:12:53,550 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:12:53,551 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:12:53,552 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:12:53,555 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:12:53,555 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:12:53,561 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:12:53,562 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:12:53,562 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:12:53,566 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:12:53,566 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:12:53,572 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:12:53,573 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:12:53,573 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:12:53,576 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:12:53,576 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:12:53,582 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:12:53,583 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:12:53,583 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:12:53,589 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:12:53,592 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:12:53,594 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:12:53,595 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:12:53,601 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:12:53,602 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:12:53,602 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:12:53,604 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:12:53,605 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:12:53,605 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:12:53,605 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:12:53,609 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 15:17:14,668 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:17:14,676 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:17:14,898 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:17:14,901 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:17:14,902 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:17:14,902 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:17:14,902 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:17:14,902 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:17:14,902 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:17:14,902 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:17:14,902 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:17:14,902 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:17:14,902 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:17:14,902 - Group['livy'] {}
2025-12-23 15:17:14,906 - Group['spark'] {}
2025-12-23 15:17:14,907 - Group['ranger'] {}
2025-12-23 15:17:14,907 - Group['hdfs'] {}
2025-12-23 15:17:14,908 - Group['hadoop'] {}
2025-12-23 15:17:14,908 - Group['nifi'] {}
2025-12-23 15:17:14,909 - Group['users'] {}
2025-12-23 15:17:14,910 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,911 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,913 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,914 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,916 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,917 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,918 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,920 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,921 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,922 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,924 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,925 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,927 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,928 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,929 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,931 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:17:14,931 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:17:14,938 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:17:14,939 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:17:14,940 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:17:14,941 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:17:14,941 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:17:14,950 - call returned (0, '1015')
2025-12-23 15:17:14,951 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:17:14,957 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:17:14,958 - Group['hdfs'] {}
2025-12-23 15:17:14,959 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:14,960 - FS Type: HDFS
2025-12-23 15:17:14,961 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:17:14,971 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:17:14,971 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:17:14,977 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:17:14,979 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:17:14,979 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:17:15,025 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:17:15,025 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:17:15,040 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:17:15,041 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:17:15,046 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:17:15,046 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:17:15,046 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:17:15,049 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:17:15,050 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:17:15,057 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:17:15,060 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:17:15,060 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:17:15,067 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:17:15,072 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:17:15,073 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:17:15,079 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:17:15,080 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:17:15,087 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:17:15,087 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:17:15,094 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:17:15,095 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:17:15,095 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:17:15,096 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:17:15,100 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:17:15,106 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:17:15,112 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:17:15,113 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:17:15,114 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:17:15,120 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:17:17,670 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:17:17,687 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:17:17,690 - Changing owner of package files
2025-12-23 15:17:17,690 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:17:17,696 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:17:17,696 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:17:17,696 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:17:17,697 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,698 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,699 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,699 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,700 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,701 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,702 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,703 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,703 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,709 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,709 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:17,710 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:17:17,713 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:17:17,714 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:17:17,720 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:17:17,720 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:17:18,501 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:17:18,506 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:17:18,506 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:17:18,515 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:17:18,533 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:17:18,543 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:17:18,562 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:17:18,573 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:17:18,580 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:17:18,587 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:49586, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:17:18,603 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002d, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:17:18,629 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:17:18,948 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:17:18,501 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:17:18,505 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:17:18,506 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:17:18,506 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:17:18,507 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:17:18,515 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:17:18,533 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:17:18,543 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:17:18,562 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:17:18,573 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:17:18,580 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:17:18,587 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:49586, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:17:18,603 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002d, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:17:18,629 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:17:18,949 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:17:18,950 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:17:18,960 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:17:18,960 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:17:19,047 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:17:19,060 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:17:19,061 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:17:19,061 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:17:19,070 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:17:19,071 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:17:19,077 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:17:19,080 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:17:19,080 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:17:19,088 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:17:19,088 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:17:19,103 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:17:19,104 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:17:19,104 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:17:19,110 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:17:19,110 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:17:19,124 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:17:19,125 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:17:19,125 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:17:19,135 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:17:19,145 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:17:19,150 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:17:19,150 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:17:19,160 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:17:19,165 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:17:19,165 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:17:19,168 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:17:19,170 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:17:19,170 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:17:19,171 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:17:19,176 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-23 15:17:45,141 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:17:45,149 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:17:45,360 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:17:45,363 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-23 15:17:45,364 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-23 15:17:45,364 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-23 15:17:45,364 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-23 15:17:45,364 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:17:45,364 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-23 15:17:45,364 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-23 15:17:45,364 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-23 15:17:45,364 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:17:45,364 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-23 15:17:45,364 - Group['livy'] {}
2025-12-23 15:17:45,367 - Group['spark'] {}
2025-12-23 15:17:45,368 - Group['ranger'] {}
2025-12-23 15:17:45,368 - Group['hdfs'] {}
2025-12-23 15:17:45,369 - Group['hadoop'] {}
2025-12-23 15:17:45,370 - Group['nifi'] {}
2025-12-23 15:17:45,370 - Group['users'] {}
2025-12-23 15:17:45,371 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,372 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,374 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,375 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,377 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,379 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,381 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,382 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,384 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,385 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,387 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,388 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,390 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,391 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,392 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,394 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:17:45,395 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-23 15:17:45,401 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-23 15:17:45,402 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-23 15:17:45,403 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:17:45,403 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-23 15:17:45,404 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-23 15:17:45,411 - call returned (0, '1015')
2025-12-23 15:17:45,412 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-23 15:17:45,417 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-23 15:17:45,418 - Group['hdfs'] {}
2025-12-23 15:17:45,419 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-23 15:17:45,420 - FS Type: HDFS
2025-12-23 15:17:45,420 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-23 15:17:45,429 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:17:45,430 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-23 15:17:45,436 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-23 15:17:45,437 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-23 15:17:45,437 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-23 15:17:45,479 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-23 15:17:45,479 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-23 15:17:45,492 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-23 15:17:45,493 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-23 15:17:45,496 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-23 15:17:45,497 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:17:45,497 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-23 15:17:45,500 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-23 15:17:45,501 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-23 15:17:45,507 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-23 15:17:45,510 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-23 15:17:45,510 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-23 15:17:45,516 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-23 15:17:45,521 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-23 15:17:45,522 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-23 15:17:45,527 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-23 15:17:45,528 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-23 15:17:45,535 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-23 15:17:45,535 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-23 15:17:45,541 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-23 15:17:45,542 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-23 15:17:45,542 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-23 15:17:45,543 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-23 15:17:45,547 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:17:45,553 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-23 15:17:45,558 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-23 15:17:45,559 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-23 15:17:45,560 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-23 15:17:45,565 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-23 15:17:49,635 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-23 15:17:49,667 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:17:49,673 - Changing owner of package files
2025-12-23 15:17:49,673 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-23 15:17:49,686 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-23 15:17:49,686 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-23 15:17:49,686 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-23 15:17:49,686 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,689 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,690 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,693 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,694 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,694 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,696 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,698 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,699 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,706 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,709 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-23 15:17:49,713 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-23 15:17:49,716 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-23 15:17:49,721 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-23 15:17:49,731 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi
2025-12-23 15:17:49,731 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server node2.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to node2.cdp:2181
2025-12-23 15:17:50,526 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-23 15:17:50,540 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-23 15:17:50,542 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-23 15:17:50,544 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-23 15:17:50,558 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-23 15:17:50,571 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-23 15:17:50,588 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-23 15:17:50,598 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.
2025-12-23 15:17:50,601 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-23 15:17:50,614 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:55908, server: node2.cdp/10.0.0.4:2181
2025-12-23 15:17:50,630 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002e, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-23 15:17:50,649 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-23 15:17:50,969 - call returned (1, 'Connecting to node2.cdp:2181\n2025-12-23 15:17:50,526 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-23 15:17:50,540 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-23 15:17:50,541 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-23 15:17:50,542 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-23 15:17:50,544 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=node2.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-23 15:17:50,558 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-23 15:17:50,571 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-23 15:17:50,588 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-23 15:17:50,598 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server node2.cdp/10.0.0.4:2181.\n2025-12-23 15:17:50,601 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-23 15:17:50,614 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:55908, server: node2.cdp/10.0.0.4:2181\n2025-12-23 15:17:50,630 [myid:node2.cdp:2181] - INFO  [main-SendThread(node2.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server node2.cdp/10.0.0.4:2181, session id = 0x300001c6e4e002e, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-23 15:17:50,649 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-23 15:17:50,970 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-23 15:17:50,971 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-23 15:17:50,979 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-23 15:17:50,979 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-23 15:17:51,068 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-23 15:17:51,083 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:17:51,084 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-23 15:17:51,084 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-23 15:17:51,093 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:17:51,093 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-23 15:17:51,105 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:17:51,109 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-23 15:17:51,109 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-23 15:17:51,112 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:17:51,117 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-23 15:17:51,128 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:17:51,130 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-23 15:17:51,131 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-23 15:17:51,136 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:17:51,136 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-23 15:17:51,151 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:17:51,152 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-23 15:17:51,152 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-23 15:17:51,165 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:17:51,172 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-23 15:17:51,177 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-23 15:17:51,178 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-23 15:17:51,190 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:17:51,191 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-23 15:17:51,191 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-23 15:17:51,197 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-23 15:17:51,200 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-23 15:17:51,200 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-23 15:17:51,200 - Encrypting NiFi sensitive configuration properties
2025-12-23 15:17:51,207 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}

Command failed after 10 tries
