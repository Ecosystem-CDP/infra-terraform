stderr: 
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
NoneType: None

The above exception was the cause of the following exception:

Traceback (most recent call last):
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 305, in <module>
    Master().execute()
  File "/usr/lib/ambari-agent/lib/resource_management/libraries/script/script.py", line 350, in execute
    method(env)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 142, in start
    self.configure(env, is_starting = True)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 110, in configure
    self.write_configurations(params, is_starting)
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi.py", line 235, in write_configurations
    nifi_toolkit_util_common.encrypt_sensitive_properties(
  File "/var/lib/ambari-agent/cache/stacks/ODP/1.2/services/NIFI/package/scripts/nifi_toolkit_util_common.py", line 576, in encrypt_sensitive_properties
    Execute(encrypt_config_command, user=nifi_user, logoutput=False, environment=environment)
  File "/usr/lib/ambari-agent/lib/resource_management/core/base.py", line 164, in __init__
    self.env.run()
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 163, in run
    self.run_action(resource, action)
  File "/usr/lib/ambari-agent/lib/resource_management/core/environment.py", line 127, in run_action
    provider_action()
  File "/usr/lib/ambari-agent/lib/resource_management/core/providers/system.py", line 253, in action_run
    shell.checked_call(self.resource.command, logoutput=self.resource.logoutput,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 73, in inner
    result = function(command, **kwargs)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 100, in checked_call
    return _call_wrapper(command, logoutput=logoutput, throw_on_failure=True, stdout=stdout, stderr=stderr,
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 151, in _call_wrapper
    result = _call(command, **kwargs_copy)
  File "/usr/lib/ambari-agent/lib/resource_management/core/shell.py", line 315, in _call
    raise ExecutionFailed(err_msg, code, out, err)
resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh -v -b /usr/odp/current/nifi/conf/bootstrap.conf -n /usr/odp/current/nifi/conf/nifi.properties -p '[PROTECTED]'' returned 4. [main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Handling encryption of nifi.properties
[main] WARN org.apache.nifi.properties.ConfigEncryptionTool - The source nifi.properties and destination nifi.properties are identical [/usr/odp/current/nifi/conf/nifi.properties] so the original will be overwritten
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool -        bootstrap.conf:               /usr/odp/current/nifi/conf/bootstrap.conf
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) nifi.properties:              /usr/odp/current/nifi/conf/nifi.properties
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) login-identity-providers.xml: null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) authorizers.xml:              null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (src)  flow.xml.gz:                  null
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - (dest) flow.xml.gz:                  null
[main] WARN org.apache.nifi.properties.AbstractBootstrapPropertiesLoader - System Property [nifi.properties.file.path] not found: Using Relative Path [conf/nifi.properties]
[main] INFO org.apache.nifi.properties.NiFiPropertiesLoader - Loading Application Properties [/usr/odp/current/nifi/conf/nifi.properties]
[main] INFO org.apache.nifi.properties.ConfigEncryptionTool - Reading password from secure console
Enter the password: [main] ERROR org.apache.nifi.properties.ConfigEncryptionTool - Encountered an error
java.lang.NullPointerException
	at org.apache.nifi.util.console.CharacterDevice.readPassword(CharacterDevice.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:209)
	at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:51)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.readPasswordFromConsole(ConfigEncryptionTool.groovy:575)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:149)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:100)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:231)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKeyInternal(ConfigEncryptionTool.groovy:540)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:57)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:212)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:557)
	at org.apache.nifi.properties.ConfigEncryptionTool.getKey(ConfigEncryptionTool.groovy:556)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:189)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:130)
	at org.apache.nifi.properties.ConfigEncryptionTool.main(ConfigEncryptionTool.groovy:1395)
	at org.apache.nifi.properties.ConfigEncryptionTool$main.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.LegacyMode.run(LegacyMode.groovy:30)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:48)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:69)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)
	at org.apache.nifi.toolkit.encryptconfig.EncryptConfigMain.main(EncryptConfigMain.groovy:109)
usage: org.apache.nifi.properties.ConfigEncryptionTool [-h] [-v] [-n <file>] [-o <file>] [-l <file>] [-i <file>] [-a <file>] [-u <file>] [-f <file>] [-g <file>]
       [-b <file>] [-S <protectionScheme>] [-k <keyhex>] [-e <keyhex>] [-H <protectionScheme>] [-p <password>] [-w <password>] [-r] [-m] [-x] [-s
       <password|keyhex>] [-A <algorithm>] [-P <algorithm>] [-c]

This tool reads from a nifi.properties and/or login-identity-providers.xml file with plain sensitive configuration values, prompts the user for a root key, and
encrypts each value. It will replace the plain value with the protected value in the same file (or write to a new file if specified). It can also be used to
migrate already-encrypted values in those files or in flow.xml.gz to be encrypted with a new key.

 -h,--help                                     Show usage information (this message)
 -v,--verbose                                  Sets verbose mode (default false)
 -n,--niFiProperties <file>                    The nifi.properties file containing unprotected config values (will be overwritten unless -o is specified)
 -o,--outputNiFiProperties <file>              The destination nifi.properties file containing protected config values (will not modify input nifi.properties)
 -l,--loginIdentityProviders <file>            The login-identity-providers.xml file containing unprotected config values (will be overwritten unless -i is
                                               specified)
 -i,--outputLoginIdentityProviders <file>      The destination login-identity-providers.xml file containing protected config values (will not modify input
                                               login-identity-providers.xml)
 -a,--authorizers <file>                       The authorizers.xml file containing unprotected config values (will be overwritten unless -u is specified)
 -u,--outputAuthorizers <file>                 The destination authorizers.xml file containing protected config values (will not modify input authorizers.xml)
 -f,--flowXml <file>                           The flow.xml.gz file currently protected with old password (will be overwritten unless -g is specified)
 -g,--outputFlowXml <file>                     The destination flow.xml.gz file containing protected config values (will not modify input flow.xml.gz)
 -b,--bootstrapConf <file>                     The bootstrap.conf file to persist root key and to optionally provide any configuration for the protection
                                               scheme.
 -S,--protectionScheme <protectionScheme>      Selects the protection scheme for encrypted properties. Default is AES_GCM. Valid values: [AES_GCM,
                                               AWS_SECRETSMANAGER, AWS_KMS, AZURE_KEYVAULT_KEY, AZURE_KEYVAULT_SECRET, GCP_KMS, HASHICORP_VAULT_KV,
                                               HASHICORP_VAULT_TRANSIT]
 -k,--key <keyhex>                             The raw hexadecimal key to use to encrypt the sensitive properties
 -e,--oldKey <keyhex>                          The old raw hexadecimal key to use during key migration
 -H,--oldProtectionScheme <protectionScheme>   The old protection scheme to use during encryption migration (see --protectionScheme for possible values).
                                               Default is AES_GCM
 -p,--password <password>                      The password from which to derive the key to use to encrypt the sensitive properties
 -w,--oldPassword <password>                   The old password from which to derive the key during migration
 -r,--useRawKey                                If provided, the secure console will prompt for the raw key value in hexadecimal form
 -m,--migrate                                  If provided, the nifi.properties and/or login-identity-providers.xml sensitive properties will be re-encrypted
                                               with the new scheme
 -x,--encryptFlowXmlOnly                       If provided, the properties in flow.xml.gz will be re-encrypted with a new key but the nifi.properties and/or
                                               login-identity-providers.xml files will not be modified
 -s,--propsKey <password|keyhex>               The password or key to use to encrypt the sensitive processor properties in flow.xml.gz
 -A,--newFlowAlgorithm <algorithm>             The algorithm to use to encrypt the sensitive processor properties in flow.xml.gz
 -P,--newFlowProvider <algorithm>              The security provider to use to encrypt the sensitive processor properties in flow.xml.gz
 -c,--translateCli                             Translates the nifi.properties file to a format suitable for the NiFi CLI tool

Java home: /usr/lib/jvm/java-1.8.0-openjdk
NiFi Toolkit home: /usr/odp/current/nifi-toolkit
 stdout:
2025-12-25 16:48:21,570 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:21,577 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:48:21,790 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:21,793 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:48:21,793 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:48:21,794 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:48:21,794 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:48:21,794 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:48:21,794 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:48:21,794 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:48:21,794 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:48:21,794 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:48:21,794 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:48:21,794 - Group['livy'] {}
2025-12-25 16:48:21,797 - Group['spark'] {}
2025-12-25 16:48:21,797 - Group['ranger'] {}
2025-12-25 16:48:21,798 - Group['hdfs'] {}
2025-12-25 16:48:21,798 - Group['hadoop'] {}
2025-12-25 16:48:21,799 - Group['nifi'] {}
2025-12-25 16:48:21,800 - Group['users'] {}
2025-12-25 16:48:21,800 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,802 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,803 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,805 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,806 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,808 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,809 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,810 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,812 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,813 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,815 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,816 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,817 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,819 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,820 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,822 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:21,822 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:48:21,828 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:48:21,829 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:48:21,830 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:21,830 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:21,831 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:48:21,838 - call returned (0, '1015')
2025-12-25 16:48:21,839 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:48:21,844 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:48:21,845 - Group['hdfs'] {}
2025-12-25 16:48:21,846 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:21,846 - FS Type: HDFS
2025-12-25 16:48:21,847 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:48:21,856 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:48:21,856 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:48:21,862 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:48:21,863 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:48:21,864 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:48:21,902 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:48:21,902 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:48:21,914 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:48:21,915 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:48:21,918 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:48:21,919 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:48:21,919 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:48:21,922 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:48:21,922 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:48:21,927 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:48:21,929 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:48:21,930 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:48:21,935 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:48:21,940 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:48:21,940 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:48:21,945 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:48:21,946 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:48:21,952 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:48:21,953 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:48:21,957 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:48:21,958 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:48:21,959 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:48:21,959 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:48:21,963 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:48:21,967 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:48:21,972 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:48:21,973 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:48:21,974 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:48:21,978 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:48:22,375 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:22,393 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:48:22,396 - Changing owner of package files
2025-12-25 16:48:22,396 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:48:22,402 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:48:22,402 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:48:22,402 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:48:22,402 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,403 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,404 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,405 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,406 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,406 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,407 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,409 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,410 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,415 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,415 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:22,416 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:48:22,419 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:48:22,420 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:48:22,426 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:48:22,427 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:48:22,925 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:48:22,939 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:48:22,946 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:48:22,953 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:48:22,963 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:48:22,969 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:48:22,973 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:48:22,981 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:43416, server: master.cdp/10.0.0.2:2181
2025-12-25 16:48:23,007 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30016, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:48:23,024 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:48:23,343 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:48:22,925 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:48:22,935 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:48:22,936 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:48:22,939 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:48:22,946 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:48:22,953 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:48:22,963 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:48:22,969 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:48:22,973 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:48:22,981 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:43416, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:48:23,007 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30016, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:48:23,024 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:48:23,344 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:48:23,345 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:48:23,349 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:48:23,350 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:48:23,393 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:48:23,399 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:48:23,400 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:48:23,401 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:48:23,404 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:23,404 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:48:23,409 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:48:23,410 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:48:23,411 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:48:23,414 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:23,414 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:48:23,420 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:48:23,421 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:48:23,421 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:48:23,424 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:23,424 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:48:23,429 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:48:23,430 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:48:23,430 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:48:23,436 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:23,439 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:23,441 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:48:23,441 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:48:23,447 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:48:23,448 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:48:23,448 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:48:23,450 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:23,451 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:48:23,451 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:48:23,451 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:48:23,455 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-25 16:48:29,543 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:29,554 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:48:30,009 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:30,016 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:48:30,017 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:48:30,017 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:48:30,017 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:48:30,017 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:48:30,017 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:48:30,017 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:48:30,017 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:48:30,017 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:48:30,017 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:48:30,017 - Group['livy'] {}
2025-12-25 16:48:30,024 - Group['spark'] {}
2025-12-25 16:48:30,025 - Group['ranger'] {}
2025-12-25 16:48:30,025 - Group['hdfs'] {}
2025-12-25 16:48:30,026 - Group['hadoop'] {}
2025-12-25 16:48:30,026 - Group['nifi'] {}
2025-12-25 16:48:30,027 - Group['users'] {}
2025-12-25 16:48:30,029 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,032 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,035 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,039 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,041 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,042 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,044 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,048 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,050 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,052 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,056 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,058 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,059 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,064 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,065 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,068 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:30,069 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:48:30,081 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:48:30,081 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:48:30,082 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:30,083 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:30,083 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:48:30,105 - call returned (0, '1015')
2025-12-25 16:48:30,106 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:48:30,115 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:48:30,116 - Group['hdfs'] {}
2025-12-25 16:48:30,117 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:30,118 - FS Type: HDFS
2025-12-25 16:48:30,118 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:48:30,138 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:48:30,138 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:48:30,152 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:48:30,153 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:48:30,153 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:48:30,237 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:48:30,238 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:48:30,267 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:48:30,268 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:48:30,277 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:48:30,277 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:48:30,278 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:48:30,284 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:48:30,284 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:48:30,294 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:48:30,297 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:48:30,297 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:48:30,307 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:48:30,316 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:48:30,316 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:48:30,328 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:48:30,329 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:48:30,341 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:48:30,341 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:48:30,352 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:48:30,353 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:48:30,353 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:48:30,354 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:48:30,368 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:48:30,383 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:48:30,391 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:48:30,395 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:48:30,395 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:48:30,400 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:48:31,329 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:31,359 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:48:31,368 - Changing owner of package files
2025-12-25 16:48:31,368 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:48:31,381 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:48:31,383 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:48:31,383 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:48:31,384 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,385 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,386 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,387 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,389 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,391 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,393 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,396 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,397 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,405 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,406 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:31,410 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:48:31,415 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:48:31,415 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:48:31,428 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:48:31,429 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:48:32,203 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:48:32,216 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:48:32,218 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:48:32,236 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:48:32,246 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:48:32,267 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:48:32,276 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:48:32,282 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:48:32,293 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:48096, server: master.cdp/10.0.0.2:2181
2025-12-25 16:48:32,309 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30017, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:48:32,332 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:48:32,652 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:48:32,203 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:48:32,215 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:48:32,216 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:48:32,218 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:48:32,236 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:48:32,246 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:48:32,267 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:48:32,276 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:48:32,282 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:48:32,293 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:48096, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:48:32,309 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30017, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:48:32,332 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:48:32,653 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:48:32,653 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:48:32,657 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:48:32,663 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:48:32,753 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:48:32,763 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:48:32,764 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:48:32,765 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:48:32,772 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:32,772 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:48:32,781 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:48:32,783 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:48:32,783 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:48:32,789 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:32,790 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:48:32,804 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:48:32,805 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:48:32,805 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:48:32,812 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:32,812 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:48:32,821 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:48:32,821 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:48:32,822 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:48:32,831 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:32,840 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:32,842 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:48:32,842 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:48:32,856 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:48:32,856 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:48:32,857 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:48:32,861 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:32,863 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:48:32,864 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:48:32,864 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:48:32,869 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-25 16:48:40,084 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:40,092 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:48:40,309 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:40,312 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:48:40,312 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:48:40,312 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:48:40,313 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:48:40,313 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:48:40,313 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:48:40,313 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:48:40,313 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:48:40,313 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:48:40,313 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:48:40,313 - Group['livy'] {}
2025-12-25 16:48:40,315 - Group['spark'] {}
2025-12-25 16:48:40,316 - Group['ranger'] {}
2025-12-25 16:48:40,317 - Group['hdfs'] {}
2025-12-25 16:48:40,317 - Group['hadoop'] {}
2025-12-25 16:48:40,318 - Group['nifi'] {}
2025-12-25 16:48:40,318 - Group['users'] {}
2025-12-25 16:48:40,319 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,320 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,322 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,323 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,325 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,326 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,328 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,329 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,330 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,332 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,333 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,335 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,336 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,337 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,339 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,340 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:40,341 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:48:40,347 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:48:40,347 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:48:40,348 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:40,349 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:40,349 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:48:40,356 - call returned (0, '1015')
2025-12-25 16:48:40,357 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:48:40,362 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:48:40,363 - Group['hdfs'] {}
2025-12-25 16:48:40,364 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:40,365 - FS Type: HDFS
2025-12-25 16:48:40,365 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:48:40,374 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:48:40,375 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:48:40,380 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:48:40,381 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:48:40,381 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:48:40,418 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:48:40,419 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:48:40,430 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:48:40,431 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:48:40,435 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:48:40,436 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:48:40,436 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:48:40,439 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:48:40,439 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:48:40,444 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:48:40,446 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:48:40,446 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:48:40,451 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:48:40,456 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:48:40,456 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:48:40,461 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:48:40,462 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:48:40,468 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:48:40,468 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:48:40,473 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:48:40,474 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:48:40,474 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:48:40,474 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:48:40,478 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:48:40,483 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:48:40,488 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:48:40,489 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:48:40,490 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:48:40,494 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:48:41,053 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:41,069 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:48:41,072 - Changing owner of package files
2025-12-25 16:48:41,072 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:48:41,078 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:48:41,078 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:48:41,078 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:48:41,078 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,079 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,080 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,081 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,082 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,082 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,083 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,084 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,085 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,089 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,090 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:41,091 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:48:41,094 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:48:41,094 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:48:41,100 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:48:41,100 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:48:41,581 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:48:41,585 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:48:41,585 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:48:41,585 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:48:41,585 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:48:41,588 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:48:41,588 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:48:41,588 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:48:41,594 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:48:41,602 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:48:41,608 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:48:41,623 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:48:41,631 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:48:41,632 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:48:41,640 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:34652, server: master.cdp/10.0.0.2:2181
2025-12-25 16:48:41,651 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30018, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:48:41,664 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:48:41,980 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:48:41,581 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:48:41,585 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:48:41,585 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:48:41,585 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:48:41,585 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:48:41,586 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:48:41,587 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:48:41,588 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:48:41,588 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:48:41,588 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:48:41,594 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:48:41,602 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:48:41,608 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:48:41,623 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:48:41,631 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:48:41,632 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:48:41,640 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:34652, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:48:41,651 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30018, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:48:41,664 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:48:41,981 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:48:41,982 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:48:41,986 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:48:41,986 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:48:42,028 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:48:42,035 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:48:42,036 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:48:42,036 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:48:42,039 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:42,040 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:48:42,046 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:48:42,047 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:48:42,047 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:48:42,051 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:42,051 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:48:42,058 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:48:42,059 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:48:42,060 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:48:42,062 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:42,063 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:48:42,071 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:48:42,072 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:48:42,072 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:48:42,078 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:42,082 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:42,084 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:48:42,084 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:48:42,091 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:48:42,092 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:48:42,092 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:48:42,095 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:42,096 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:48:42,096 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:48:42,096 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:48:42,101 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-25 16:48:53,682 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:53,698 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:48:54,310 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:54,317 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:48:54,318 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:48:54,318 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:48:54,318 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:48:54,318 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:48:54,318 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:48:54,318 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:48:54,318 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:48:54,318 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:48:54,318 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:48:54,319 - Group['livy'] {}
2025-12-25 16:48:54,328 - Group['spark'] {}
2025-12-25 16:48:54,328 - Group['ranger'] {}
2025-12-25 16:48:54,329 - Group['hdfs'] {}
2025-12-25 16:48:54,329 - Group['hadoop'] {}
2025-12-25 16:48:54,330 - Group['nifi'] {}
2025-12-25 16:48:54,331 - Group['users'] {}
2025-12-25 16:48:54,332 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,336 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,337 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,340 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,342 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,346 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,351 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,354 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,356 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,359 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,364 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,366 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,371 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,373 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,376 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,378 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:54,379 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:48:54,396 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:48:54,397 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:48:54,398 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:54,398 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:48:54,399 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:48:54,417 - call returned (0, '1015')
2025-12-25 16:48:54,418 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:48:54,428 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:48:54,429 - Group['hdfs'] {}
2025-12-25 16:48:54,432 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:48:54,436 - FS Type: HDFS
2025-12-25 16:48:54,436 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:48:54,453 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:48:54,453 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:48:54,467 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:48:54,468 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:48:54,469 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:48:54,565 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:48:54,565 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:48:54,589 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:48:54,590 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:48:54,600 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:48:54,601 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:48:54,601 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:48:54,606 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:48:54,606 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:48:54,620 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:48:54,622 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:48:54,622 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:48:54,637 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:48:54,647 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:48:54,648 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:48:54,656 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:48:54,657 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:48:54,669 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:48:54,670 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:48:54,684 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:48:54,685 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:48:54,685 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:48:54,686 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:48:54,695 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:48:54,709 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:48:54,721 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:48:54,723 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:48:54,723 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:48:54,731 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:48:56,311 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:48:56,347 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:48:56,353 - Changing owner of package files
2025-12-25 16:48:56,353 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:48:56,366 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:48:56,366 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:48:56,366 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:48:56,366 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,367 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,372 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,373 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,374 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,374 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,375 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,378 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,379 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,389 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,393 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:48:56,395 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:48:56,398 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:48:56,398 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:48:56,416 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:48:56,416 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:48:57,235 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:48:57,246 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:48:57,246 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:48:57,246 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:48:57,246 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:48:57,247 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:48:57,247 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:48:57,247 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:48:57,247 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:48:57,249 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:48:57,252 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:48:57,252 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:48:57,260 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:48:57,274 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:48:57,279 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:48:57,327 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:48:57,339 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:48:57,343 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:48:57,355 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:45398, server: master.cdp/10.0.0.2:2181
2025-12-25 16:48:57,377 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30019, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:48:57,405 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:48:57,728 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:48:57,235 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:48:57,246 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:48:57,246 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:48:57,246 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:48:57,246 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:48:57,247 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:48:57,247 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:48:57,247 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:48:57,247 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:48:57,249 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:48:57,251 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:48:57,252 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:48:57,252 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:48:57,260 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:48:57,274 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:48:57,279 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:48:57,327 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:48:57,339 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:48:57,343 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:48:57,355 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:45398, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:48:57,377 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30019, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:48:57,405 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:48:57,728 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:48:57,729 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:48:57,733 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:48:57,735 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:48:57,858 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:48:57,872 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:48:57,875 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:48:57,875 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:48:57,878 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:57,879 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:48:57,893 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:48:57,895 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:48:57,896 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:48:57,902 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:57,902 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:48:57,917 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:48:57,919 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:48:57,919 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:48:57,922 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:57,922 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:48:57,935 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:48:57,936 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:48:57,936 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:48:57,942 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:57,952 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:48:57,954 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:48:57,955 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:48:57,968 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:48:57,969 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:48:57,969 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:48:57,973 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:48:57,979 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:48:57,979 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:48:57,980 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:48:57,988 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-25 16:49:20,404 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:49:20,412 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:49:20,625 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:49:20,628 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:49:20,629 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:49:20,629 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:49:20,629 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:49:20,629 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:49:20,629 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:49:20,629 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:49:20,629 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:49:20,629 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:49:20,629 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:49:20,629 - Group['livy'] {}
2025-12-25 16:49:20,632 - Group['spark'] {}
2025-12-25 16:49:20,633 - Group['ranger'] {}
2025-12-25 16:49:20,633 - Group['hdfs'] {}
2025-12-25 16:49:20,634 - Group['hadoop'] {}
2025-12-25 16:49:20,634 - Group['nifi'] {}
2025-12-25 16:49:20,635 - Group['users'] {}
2025-12-25 16:49:20,636 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,637 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,638 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,640 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,641 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,643 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,646 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,648 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,650 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,651 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,652 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,654 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,655 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,657 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,658 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,659 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:49:20,660 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:49:20,666 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:49:20,667 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:49:20,668 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:49:20,668 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:49:20,669 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:49:20,676 - call returned (0, '1015')
2025-12-25 16:49:20,676 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:49:20,682 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:49:20,682 - Group['hdfs'] {}
2025-12-25 16:49:20,684 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:49:20,684 - FS Type: HDFS
2025-12-25 16:49:20,684 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:49:20,694 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:49:20,694 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:49:20,699 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:49:20,700 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:49:20,701 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:49:20,737 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:49:20,738 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:49:20,750 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:49:20,750 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:49:20,754 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:49:20,754 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:49:20,755 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:49:20,757 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:49:20,757 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:49:20,763 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:49:20,765 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:49:20,765 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:49:20,771 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:49:20,776 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:49:20,776 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:49:20,782 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:49:20,783 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:49:20,789 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:49:20,790 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:49:20,795 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:49:20,796 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:49:20,796 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:49:20,797 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:49:20,800 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:49:20,805 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:49:20,810 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:49:20,811 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:49:20,812 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:49:20,817 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:49:21,785 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:49:21,802 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:49:21,805 - Changing owner of package files
2025-12-25 16:49:21,805 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:49:21,811 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:49:21,811 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:49:21,811 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:49:21,811 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,812 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,813 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,814 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,815 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,816 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,817 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,817 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,818 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,823 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,824 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:49:21,824 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:49:21,827 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:49:21,828 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:49:21,834 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:49:21,834 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:49:22,309 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:49:22,315 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:49:22,315 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:49:22,315 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:49:22,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:49:22,317 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:49:22,317 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:49:22,318 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:49:22,318 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:49:22,318 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:49:22,319 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:49:22,319 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:49:22,319 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:49:22,319 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:49:22,320 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:49:22,320 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:49:22,320 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:49:22,320 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:49:22,324 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:49:22,330 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:49:22,339 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:49:22,349 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:49:22,355 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:49:22,356 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:49:22,364 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:58620, server: master.cdp/10.0.0.2:2181
2025-12-25 16:49:22,376 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001a, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:49:22,392 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:49:22,708 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:49:22,309 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:49:22,315 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:49:22,315 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:49:22,315 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:49:22,316 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:49:22,317 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:49:22,317 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:49:22,318 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:49:22,318 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:49:22,318 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:49:22,319 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:49:22,319 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:49:22,319 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:49:22,319 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:49:22,320 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:49:22,320 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:49:22,320 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:49:22,320 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:49:22,324 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:49:22,330 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:49:22,339 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:49:22,349 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:49:22,355 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:49:22,356 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:49:22,364 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:58620, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:49:22,376 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001a, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:49:22,392 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:49:22,709 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:49:22,709 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:49:22,714 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:49:22,714 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:49:22,755 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:49:22,761 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:49:22,763 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:49:22,763 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:49:22,766 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:49:22,766 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:49:22,772 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:49:22,773 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:49:22,773 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:49:22,777 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:49:22,777 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:49:22,783 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:49:22,784 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:49:22,784 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:49:22,787 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:49:22,788 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:49:22,793 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:49:22,794 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:49:22,794 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:49:22,800 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:49:22,804 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:49:22,805 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:49:22,806 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:49:22,811 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:49:22,812 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:49:22,813 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:49:22,815 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:49:22,816 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:49:22,816 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:49:22,816 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:49:22,820 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-25 16:50:01,516 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:50:01,524 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:50:01,750 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:50:01,752 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:50:01,753 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:50:01,753 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:50:01,753 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:50:01,753 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:50:01,753 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:50:01,753 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:50:01,754 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:50:01,754 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:50:01,754 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:50:01,754 - Group['livy'] {}
2025-12-25 16:50:01,757 - Group['spark'] {}
2025-12-25 16:50:01,757 - Group['ranger'] {}
2025-12-25 16:50:01,758 - Group['hdfs'] {}
2025-12-25 16:50:01,759 - Group['hadoop'] {}
2025-12-25 16:50:01,759 - Group['nifi'] {}
2025-12-25 16:50:01,760 - Group['users'] {}
2025-12-25 16:50:01,761 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,762 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,764 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,765 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,766 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,768 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,769 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,771 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,772 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,774 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,775 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,777 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,778 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,780 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,781 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,782 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:50:01,783 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:50:01,791 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:50:01,791 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:50:01,792 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:50:01,793 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:50:01,793 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:50:01,802 - call returned (0, '1015')
2025-12-25 16:50:01,803 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:50:01,809 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:50:01,810 - Group['hdfs'] {}
2025-12-25 16:50:01,811 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:50:01,812 - FS Type: HDFS
2025-12-25 16:50:01,812 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:50:01,822 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:50:01,822 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:50:01,829 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:50:01,830 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:50:01,831 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:50:01,877 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:50:01,878 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:50:01,891 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:50:01,892 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:50:01,896 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:50:01,896 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:50:01,896 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:50:01,899 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:50:01,900 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:50:01,906 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:50:01,908 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:50:01,909 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:50:01,914 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:50:01,920 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:50:01,920 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:50:01,926 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:50:01,927 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:50:01,934 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:50:01,934 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:50:01,940 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:50:01,941 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:50:01,942 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:50:01,943 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:50:01,946 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:50:01,952 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:50:01,958 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:50:01,960 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:50:01,960 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:50:01,966 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:50:03,257 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:50:03,275 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:50:03,278 - Changing owner of package files
2025-12-25 16:50:03,278 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:50:03,284 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:50:03,284 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:50:03,284 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:50:03,285 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,286 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,287 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,288 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,288 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,289 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,290 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,291 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,292 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,296 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,297 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:50:03,298 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:50:03,301 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:50:03,302 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:50:03,308 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:50:03,308 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:50:03,800 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:50:03,806 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:50:03,807 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:50:03,807 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:50:03,807 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:50:03,808 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:50:03,808 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:50:03,810 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:50:03,810 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:50:03,811 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:50:03,811 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:50:03,811 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:50:03,816 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:50:03,823 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:50:03,831 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:50:03,844 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:50:03,854 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:50:03,854 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:50:03,861 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:35720, server: master.cdp/10.0.0.2:2181
2025-12-25 16:50:03,876 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001c, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:50:03,896 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:50:04,212 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:50:03,800 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:50:03,806 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:50:03,807 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:50:03,807 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:50:03,807 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:50:03,808 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:50:03,808 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:50:03,809 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:50:03,810 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:50:03,810 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:50:03,811 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:50:03,811 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:50:03,811 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:50:03,816 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:50:03,823 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:50:03,831 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:50:03,844 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:50:03,854 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:50:03,854 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:50:03,861 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:35720, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:50:03,876 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001c, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:50:03,896 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:50:04,212 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:50:04,213 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:50:04,217 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:50:04,217 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:50:04,260 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:50:04,266 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:50:04,267 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:50:04,267 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:50:04,270 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:50:04,270 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:50:04,276 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:50:04,277 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:50:04,277 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:50:04,280 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:50:04,281 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:50:04,288 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:50:04,289 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:50:04,289 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:50:04,292 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:50:04,292 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:50:04,299 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:50:04,300 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:50:04,300 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:50:04,305 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:50:04,309 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:50:04,311 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:50:04,312 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:50:04,318 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:50:04,318 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:50:04,319 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:50:04,322 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:50:04,323 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:50:04,323 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:50:04,324 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:50:04,327 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-25 16:51:13,283 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:51:13,320 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:51:13,840 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:51:13,851 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:51:13,853 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:51:13,853 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:51:13,853 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:51:13,853 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:51:13,853 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:51:13,853 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:51:13,853 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:51:13,853 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:51:13,853 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:51:13,853 - Group['livy'] {}
2025-12-25 16:51:13,869 - Group['spark'] {}
2025-12-25 16:51:13,872 - Group['ranger'] {}
2025-12-25 16:51:13,875 - Group['hdfs'] {}
2025-12-25 16:51:13,879 - Group['hadoop'] {}
2025-12-25 16:51:13,881 - Group['nifi'] {}
2025-12-25 16:51:13,883 - Group['users'] {}
2025-12-25 16:51:13,888 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,895 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,898 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,903 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,908 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,916 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,919 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,924 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,928 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,933 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,938 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,944 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,949 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,954 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,960 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:13,965 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:51:13,966 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:51:13,977 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:51:13,980 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:51:13,983 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:51:13,984 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:51:13,985 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:51:14,016 - call returned (0, '1015')
2025-12-25 16:51:14,016 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:51:14,041 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:51:14,041 - Group['hdfs'] {}
2025-12-25 16:51:14,047 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:51:14,055 - FS Type: HDFS
2025-12-25 16:51:14,056 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:51:14,078 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:51:14,079 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:51:14,084 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:51:14,085 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:51:14,087 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:51:14,123 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:51:14,123 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:51:14,135 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:51:14,135 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:51:14,139 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:51:14,139 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:51:14,139 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:51:14,142 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:51:14,142 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:51:14,148 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:51:14,150 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:51:14,150 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:51:14,155 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:51:14,161 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:51:14,161 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:51:14,166 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:51:14,167 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:51:14,174 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:51:14,174 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:51:14,179 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:51:14,180 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:51:14,180 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:51:14,180 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:51:14,184 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:51:14,188 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:51:14,192 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:51:14,193 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:51:14,194 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:51:14,198 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:51:15,837 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:51:15,853 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:51:15,856 - Changing owner of package files
2025-12-25 16:51:15,856 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:51:15,862 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:51:15,862 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:51:15,862 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:51:15,863 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,864 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,865 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,866 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,866 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,867 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,868 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,869 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,870 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,875 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,875 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:51:15,876 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:51:15,879 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:51:15,880 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:51:15,886 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:51:15,886 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:51:16,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:51:16,382 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:51:16,384 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:51:16,384 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:51:16,386 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:51:16,386 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:51:16,389 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:51:16,398 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:51:16,404 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:51:16,413 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:51:16,421 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:51:16,423 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:51:16,428 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:40410, server: master.cdp/10.0.0.2:2181
2025-12-25 16:51:16,445 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001d, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:51:16,460 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:51:16,775 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:51:16,380 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:51:16,382 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:51:16,383 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:51:16,384 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:51:16,384 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:51:16,386 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:51:16,386 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:51:16,387 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:51:16,389 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:51:16,398 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:51:16,404 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:51:16,413 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:51:16,421 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:51:16,423 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:51:16,428 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:40410, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:51:16,445 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001d, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:51:16,460 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:51:16,776 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:51:16,777 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:51:16,781 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:51:16,781 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:51:16,823 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:51:16,829 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:51:16,830 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:51:16,831 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:51:16,833 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:51:16,834 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:51:16,839 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:51:16,840 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:51:16,840 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:51:16,843 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:51:16,844 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:51:16,849 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:51:16,850 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:51:16,850 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:51:16,853 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:51:16,853 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:51:16,858 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:51:16,859 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:51:16,860 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:51:16,865 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:51:16,868 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:51:16,870 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:51:16,870 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:51:16,876 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:51:16,877 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:51:16,877 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:51:16,879 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:51:16,880 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:51:16,880 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:51:16,880 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:51:16,884 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-25 16:53:29,581 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:53:29,589 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:53:29,805 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:53:29,807 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:53:29,808 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:53:29,808 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:53:29,808 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:53:29,808 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:53:29,808 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:53:29,808 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:53:29,808 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:53:29,808 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:53:29,809 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:53:29,809 - Group['livy'] {}
2025-12-25 16:53:29,812 - Group['spark'] {}
2025-12-25 16:53:29,812 - Group['ranger'] {}
2025-12-25 16:53:29,813 - Group['hdfs'] {}
2025-12-25 16:53:29,813 - Group['hadoop'] {}
2025-12-25 16:53:29,814 - Group['nifi'] {}
2025-12-25 16:53:29,815 - Group['users'] {}
2025-12-25 16:53:29,815 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,817 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,818 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,820 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,821 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,822 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,824 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,825 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,827 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,828 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,829 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,831 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,832 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,834 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,835 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,837 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:53:29,838 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:53:29,844 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:53:29,844 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:53:29,845 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:53:29,846 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:53:29,846 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:53:29,853 - call returned (0, '1015')
2025-12-25 16:53:29,854 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:53:29,859 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:53:29,859 - Group['hdfs'] {}
2025-12-25 16:53:29,860 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:53:29,861 - FS Type: HDFS
2025-12-25 16:53:29,861 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:53:29,871 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:53:29,871 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:53:29,876 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:53:29,877 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:53:29,878 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:53:29,917 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:53:29,918 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:53:29,930 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:53:29,931 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:53:29,934 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:53:29,935 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:53:29,935 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:53:29,938 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:53:29,939 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:53:29,944 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:53:29,946 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:53:29,947 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:53:29,952 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:53:29,957 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:53:29,957 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:53:29,963 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:53:29,964 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:53:29,970 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:53:29,970 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:53:29,976 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:53:29,976 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:53:29,977 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:53:29,977 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:53:29,981 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:53:29,986 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:53:29,991 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:53:29,992 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:53:29,993 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:53:29,997 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:53:32,074 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:53:32,091 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:53:32,094 - Changing owner of package files
2025-12-25 16:53:32,094 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:53:32,100 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:53:32,100 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:53:32,100 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:53:32,100 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,101 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,102 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,103 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,104 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,105 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,106 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,106 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,107 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,112 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,112 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:53:32,113 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:53:32,116 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:53:32,116 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:53:32,122 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:53:32,122 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:53:32,600 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:53:32,609 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:53:32,609 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:53:32,609 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:53:32,611 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:53:32,611 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:53:32,611 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:53:32,611 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:53:32,612 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:53:32,612 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:53:32,612 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:53:32,612 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:53:32,617 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:53:32,622 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:53:32,627 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:53:32,641 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:53:32,649 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:53:32,651 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:53:32,660 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:55326, server: master.cdp/10.0.0.2:2181
2025-12-25 16:53:32,675 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001e, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:53:32,688 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:53:33,003 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:53:32,600 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:53:32,609 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:53:32,609 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:53:32,609 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:53:32,610 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:53:32,611 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:53:32,611 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:53:32,611 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:53:32,611 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:53:32,612 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:53:32,612 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:53:32,612 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:53:32,612 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:53:32,617 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:53:32,622 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:53:32,627 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:53:32,641 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:53:32,649 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:53:32,651 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:53:32,660 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:55326, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:53:32,675 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001e, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:53:32,688 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:53:33,004 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:53:33,004 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:53:33,009 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:53:33,009 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:53:33,050 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:53:33,057 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:53:33,058 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:53:33,058 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:53:33,061 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:53:33,061 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:53:33,066 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:53:33,067 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:53:33,068 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:53:33,071 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:53:33,071 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:53:33,077 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:53:33,077 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:53:33,078 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:53:33,080 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:53:33,081 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:53:33,086 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:53:33,087 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:53:33,087 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:53:33,092 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:53:33,096 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:53:33,097 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:53:33,098 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:53:33,103 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:53:33,104 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:53:33,104 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:53:33,106 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:53:33,107 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:53:33,107 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:53:33,107 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:53:33,110 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-25 16:57:54,476 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:57:54,488 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:57:54,875 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:57:54,877 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:57:54,878 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:57:54,878 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:57:54,878 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:57:54,878 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:57:54,878 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:57:54,878 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:57:54,878 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:57:54,878 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:57:54,879 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:57:54,879 - Group['livy'] {}
2025-12-25 16:57:54,882 - Group['spark'] {}
2025-12-25 16:57:54,882 - Group['ranger'] {}
2025-12-25 16:57:54,883 - Group['hdfs'] {}
2025-12-25 16:57:54,884 - Group['hadoop'] {}
2025-12-25 16:57:54,884 - Group['nifi'] {}
2025-12-25 16:57:54,885 - Group['users'] {}
2025-12-25 16:57:54,886 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,887 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,889 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,890 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,891 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,893 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,894 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,896 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,897 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,899 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,900 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,901 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,903 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,904 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,906 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,907 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:57:54,908 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:57:54,915 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:57:54,915 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:57:54,917 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:57:54,917 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:57:54,918 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:57:54,926 - call returned (0, '1015')
2025-12-25 16:57:54,927 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:57:54,932 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:57:54,933 - Group['hdfs'] {}
2025-12-25 16:57:54,934 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:57:54,935 - FS Type: HDFS
2025-12-25 16:57:54,935 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:57:54,944 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:57:54,945 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:57:54,950 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:57:54,952 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:57:54,952 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:57:54,993 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:57:54,994 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:57:55,006 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:57:55,007 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:57:55,011 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:57:55,011 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:57:55,012 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:57:55,016 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:57:55,016 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:57:55,023 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:57:55,025 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:57:55,025 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:57:55,030 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:57:55,036 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:57:55,036 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:57:55,041 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:57:55,042 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:57:55,048 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:57:55,049 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:57:55,054 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:57:55,055 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:57:55,056 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:57:55,056 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:57:55,060 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:57:55,066 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:57:55,071 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:57:55,072 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:57:55,073 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:57:55,078 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:57:57,815 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:57:57,832 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:57:57,835 - Changing owner of package files
2025-12-25 16:57:57,835 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:57:57,840 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:57:57,840 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:57:57,841 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:57:57,841 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,842 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,843 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,844 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,844 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,845 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,846 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,847 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,848 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,852 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,853 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:57:57,854 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:57:57,857 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:57:57,857 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:57:57,863 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:57:57,863 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:57:58,333 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:57:58,338 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:57:58,338 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:57:58,338 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:57:58,338 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:57:58,339 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:57:58,339 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:57:58,339 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:57:58,339 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:57:58,345 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:57:58,353 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:57:58,359 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:57:58,370 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:57:58,378 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:57:58,379 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:57:58,385 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:38578, server: master.cdp/10.0.0.2:2181
2025-12-25 16:57:58,398 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001f, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:57:58,412 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:57:58,728 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:57:58,333 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:57:58,338 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:57:58,338 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:57:58,338 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:57:58,338 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:57:58,339 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:57:58,339 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:57:58,339 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:57:58,339 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:57:58,342 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:57:58,345 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:57:58,353 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:57:58,359 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:57:58,370 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:57:58,378 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:57:58,379 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:57:58,385 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:38578, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:57:58,398 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac3001f, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:57:58,412 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:57:58,728 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:57:58,729 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:57:58,733 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:57:58,733 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:57:58,776 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:57:58,782 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:57:58,783 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:57:58,783 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:57:58,786 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:57:58,787 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:57:58,793 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:57:58,794 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:57:58,794 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:57:58,797 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:57:58,797 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:57:58,804 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:57:58,805 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:57:58,805 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:57:58,808 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:57:58,808 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:57:58,814 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:57:58,815 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:57:58,815 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:57:58,820 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:57:58,824 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:57:58,826 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:57:58,827 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:57:58,833 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:57:58,834 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:57:58,834 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:57:58,836 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:57:58,837 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:57:58,837 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:57:58,837 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:57:58,841 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}
2025-12-25 16:58:21,687 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:58:21,695 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:58:21,909 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:58:21,911 - Using hadoop conf dir: /usr/odp/1.2.2.0-128/hadoop/conf
2025-12-25 16:58:21,912 - Skipping param: datanode_max_locked_memory, due to Configuration parameter 'dfs.datanode.max.locked.memory' was not found in configurations dictionary!
2025-12-25 16:58:21,912 - Skipping param: dfs_ha_namenode_ids, due to Configuration parameter 'dfs.ha.namenodes' was not found in configurations dictionary!
2025-12-25 16:58:21,912 - Skipping param: falcon_user, due to Configuration parameter 'falcon-env' was not found in configurations dictionary!
2025-12-25 16:58:21,912 - Skipping param: gmetad_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:58:21,912 - Skipping param: gmond_user, due to Configuration parameter 'ganglia-env' was not found in configurations dictionary!
2025-12-25 16:58:21,912 - Skipping param: oozie_user, due to Configuration parameter 'oozie-env' was not found in configurations dictionary!
2025-12-25 16:58:21,912 - Skipping param: repo_info, due to Configuration parameter 'repoInfo' was not found in configurations dictionary!
2025-12-25 16:58:21,912 - Skipping param: zeppelin_group, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:58:21,913 - Skipping param: zeppelin_user, due to Configuration parameter 'zeppelin-env' was not found in configurations dictionary!
2025-12-25 16:58:21,913 - Group['livy'] {}
2025-12-25 16:58:21,915 - Group['spark'] {}
2025-12-25 16:58:21,916 - Group['ranger'] {}
2025-12-25 16:58:21,917 - Group['hdfs'] {}
2025-12-25 16:58:21,918 - Group['hadoop'] {}
2025-12-25 16:58:21,918 - Group['nifi'] {}
2025-12-25 16:58:21,919 - Group['users'] {}
2025-12-25 16:58:21,920 - User['yarn-ats'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,921 - User['hive'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,923 - User['infra-solr'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,924 - User['zookeeper'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,926 - User['ranger'] {'uid': None, 'gid': 'hadoop', 'groups': ['ranger', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,927 - User['tez'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,929 - User['nifi'] {'uid': None, 'gid': 'hadoop', 'groups': ['nifi'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,930 - User['livy'] {'uid': None, 'gid': 'hadoop', 'groups': ['livy', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,932 - User['spark'] {'uid': None, 'gid': 'hadoop', 'groups': ['spark', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,933 - User['ambari-qa'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop', 'users'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,934 - User['kafka'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,936 - User['hdfs'] {'uid': None, 'gid': 'hadoop', 'groups': ['hdfs', 'hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,937 - User['yarn'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,939 - User['mapred'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,940 - User['hbase'] {'uid': None, 'gid': 'hadoop', 'groups': ['hadoop'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,942 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:58:21,943 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] {'not_if': '(test $(id -u ambari-qa) -gt 1000) || (false)'}
2025-12-25 16:58:21,949 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh ambari-qa /tmp/hadoop-ambari-qa,/tmp/hsperfdata_ambari-qa,/home/ambari-qa,/tmp/ambari-qa,/tmp/sqoop-ambari-qa 0'] due to not_if
2025-12-25 16:58:21,949 - Directory['/tmp/hbase-hbase'] {'owner': 'hbase', 'mode': 0o775, 'create_parents': True, 'cd_access': 'a'}
2025-12-25 16:58:21,951 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:58:21,951 - File['/var/lib/ambari-agent/tmp/changeUid.sh'] {'content': StaticFile('changeToSecureUid.sh'), 'mode': 0o555}
2025-12-25 16:58:21,952 - call['/var/lib/ambari-agent/tmp/changeUid.sh hbase'] {}
2025-12-25 16:58:21,959 - call returned (0, '1015')
2025-12-25 16:58:21,960 - Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] {'not_if': '(test $(id -u hbase) -gt 1000) || (false)'}
2025-12-25 16:58:21,965 - Skipping Execute['/var/lib/ambari-agent/tmp/changeUid.sh hbase /home/hbase,/tmp/hbase,/usr/bin/hbase,/var/log/hbase,/tmp/hbase-hbase 1015'] due to not_if
2025-12-25 16:58:21,966 - Group['hdfs'] {}
2025-12-25 16:58:21,967 - User['hdfs'] {'groups': ['hdfs', 'hadoop', 'hdfs'], 'fetch_nonlocal_groups': True}
2025-12-25 16:58:21,968 - FS Type: HDFS
2025-12-25 16:58:21,968 - Directory['/etc/hadoop'] {'mode': 0o755}
2025-12-25 16:58:21,978 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:58:21,978 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh'] because contents don't match
2025-12-25 16:58:21,984 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hdfs
2025-12-25 16:58:21,985 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-env.sh from 0 to hadoop
2025-12-25 16:58:21,985 - Directory['/var/lib/ambari-agent/tmp/hadoop_java_io_tmpdir'] {'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o1777}
2025-12-25 16:58:22,025 - Skipping param: hdfs_user_keytab, due to Configuration parameter 'hdfs_user_keytab' was not found in configurations dictionary!
2025-12-25 16:58:22,025 - Execute[('setenforce', '0')] {'only_if': 'test -f /selinux/enforce', 'not_if': '(! which getenforce ) || (which getenforce && getenforce | grep -q Disabled)', 'sudo': True}
2025-12-25 16:58:22,038 - Skipping Execute[('setenforce', '0')] due to only_if
2025-12-25 16:58:22,038 - Directory['/var/log/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'hadoop', 'mode': 0o775, 'cd_access': 'a'}
2025-12-25 16:58:22,042 - Directory['/var/run/hadoop'] {'create_parents': True, 'owner': 'root', 'group': 'root', 'cd_access': 'a'}
2025-12-25 16:58:22,043 - Directory['/var/run/hadoop/hdfs'] {'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:58:22,043 - Directory['/tmp/hadoop-hdfs'] {'create_parents': True, 'owner': 'hdfs', 'cd_access': 'a'}
2025-12-25 16:58:22,046 - File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] {'owner': 'hdfs', 'content': Template('commons-logging.properties.j2')}
2025-12-25 16:58:22,046 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties'] because contents don't match
2025-12-25 16:58:22,052 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/commons-logging.properties from 0 to hdfs
2025-12-25 16:58:22,054 - File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] {'owner': 'hdfs', 'content': Template('health_check.j2')}
2025-12-25 16:58:22,055 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/health_check'] because contents don't match
2025-12-25 16:58:22,061 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/health_check from 0 to hdfs
2025-12-25 16:58:22,066 - File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] {'mode': 0o644, 'group': 'hadoop', 'owner': 'hdfs', 'content': InlineTemplate(...)}
2025-12-25 16:58:22,066 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties'] because contents don't match
2025-12-25 16:58:22,072 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hdfs
2025-12-25 16:58:22,073 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/log4j.properties from 0 to hadoop
2025-12-25 16:58:22,080 - File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] {'owner': 'hdfs', 'group': 'hadoop', 'content': InlineTemplate(...)}
2025-12-25 16:58:22,080 - Writing File['/usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties'] because contents don't match
2025-12-25 16:58:22,085 - Changing owner for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hdfs
2025-12-25 16:58:22,086 - Changing group for /usr/odp/1.2.2.0-128/hadoop/conf/hadoop-metrics2.properties from 0 to hadoop
2025-12-25 16:58:22,087 - File['/usr/odp/1.2.2.0-128/hadoop/conf/task-log4j.properties'] {'content': StaticFile('task-log4j.properties'), 'mode': 0o755}
2025-12-25 16:58:22,087 - File['/usr/odp/1.2.2.0-128/hadoop/conf/configuration.xsl'] {'owner': 'hdfs', 'group': 'hadoop'}
2025-12-25 16:58:22,091 - File['/etc/hadoop/conf/topology_mappings.data'] {'content': Template('topology_mappings.data.j2'), 'owner': 'hdfs', 'group': 'hadoop', 'mode': 0o644, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:58:22,096 - Writing File['/etc/hadoop/conf/topology_mappings.data'] because contents don't match
2025-12-25 16:58:22,102 - Changing owner for /etc/hadoop/conf/topology_mappings.data from 0 to hdfs
2025-12-25 16:58:22,103 - Changing group for /etc/hadoop/conf/topology_mappings.data from 0 to hadoop
2025-12-25 16:58:22,103 - File['/etc/hadoop/conf/topology_script.py'] {'content': StaticFile('topology_script.py'), 'mode': 0o755, 'only_if': 'test -d /etc/hadoop/conf'}
2025-12-25 16:58:22,108 - Skipping unlimited key JCE policy check and setup since the Java VM is not managed by Ambari
2025-12-25 16:58:25,233 - Stack Feature Version Info: Cluster Stack=1.2, Command Stack=None, Command Version=1.2.2.0-128 -> 1.2.2.0-128
2025-12-25 16:58:25,250 - File['/var/lib/ambari-agent/tmp/run_ca.sh'] {'content': StaticFile('run_ca.sh'), 'mode': 0o755, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:58:25,253 - Changing owner of package files
2025-12-25 16:58:25,253 - Directory['/usr/odp/current/nifi-toolkit'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': False, 'recursive_ownership': True, 'cd_access': 'a', 'mode': 0o755, 'recursion_follow_links': True}
2025-12-25 16:58:25,259 - Skipping param: nifi_master_logback_content, due to Configuration parameter 'nifi-master-logback-env' was not found in configurations dictionary!
2025-12-25 16:58:25,259 - Skipping param: nifi_master_properties_content, due to Configuration parameter 'nifi-master-properties-env' was not found in configurations dictionary!
2025-12-25 16:58:25,259 - Skipping param: smokeuser_principal, due to Configuration parameter 'smokeuser_principal_name' was not found in configurations dictionary!
2025-12-25 16:58:25,259 - Directory['/var/run/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,260 - Directory['/var/lib/nifi'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,261 - Directory['/var/lib/nifi/database_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,262 - Directory['/var/lib/nifi/flowfile_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,263 - Directory['/var/lib/nifi/provenance_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,264 - Directory['/usr/odp/current/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,265 - Directory['/var/lib/nifi/conf'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,265 - Directory['/var/lib/nifi/state/local'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,266 - Directory['/usr/odp/current/nifi/lib'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,270 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,271 - Directory['/var/lib/nifi/content_repository'] {'owner': 'nifi', 'group': 'nifi', 'create_parents': True, 'recursive_ownership': True, 'cd_access': 'a'}
2025-12-25 16:58:25,272 - Directory['/etc/security/limits.d'] {'create_parents': True, 'owner': 'root', 'group': 'root'}
2025-12-25 16:58:25,275 - File['/etc/security/limits.d/nifi.conf'] {'owner': 'root', 'group': 'root', 'mode': 0o644, 'content': Template('nifi.conf.j2')}
2025-12-25 16:58:25,275 - Writing File['/etc/security/limits.d/nifi.conf'] because contents don't match
2025-12-25 16:58:25,281 - Running command: /usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi
2025-12-25 16:58:25,281 - call['/usr/odp/1.2.2.0-128/zookeeper/bin/zkCli.sh -server master.cdp:2181 ls /nifi'] {'logoutput': True, 'quiet': False, 'timeout': 20}
Connecting to master.cdp:2181
2025-12-25 16:58:25,745 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC
2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp
2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472
2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.
2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre
2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*
2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib
2025-12-25 16:58:25,753 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp
2025-12-25 16:58:25,753 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>
2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux
2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64
2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64
2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root
2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root
2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent
2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB
2025-12-25 16:58:25,756 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB
2025-12-25 16:58:25,756 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB
2025-12-25 16:58:25,759 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2
2025-12-25 16:58:25,767 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2025-12-25 16:58:25,771 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2025-12-25 16:58:25,782 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false
2025-12-25 16:58:25,787 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.
2025-12-25 16:58:25,789 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2025-12-25 16:58:25,798 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:38940, server: master.cdp/10.0.0.2:2181
2025-12-25 16:58:25,814 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30020, negotiated timeout = 30000

WATCHER::

WatchedEvent state:SyncConnected type:None path:null
Node does not exist: /nifi
2025-12-25 16:58:25,827 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1
2025-12-25 16:58:26,143 - call returned (1, 'Connecting to master.cdp:2181\n2025-12-25 16:58:25,745 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:zookeeper.version=3.8.3-1.2.2.0-128-7a7ba1306be0cb300bbcbf68529ff646d0d2b0b9-dirty, built on 2024-03-02 08:53 UTC\n2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:host.name=node1.cdp\n2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.version=1.8.0_472\n2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.vendor=Red Hat, Inc.\n2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.472.b08-2.0.1.el9.aarch64/jre\n2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.class.path=/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/classes:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/target/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../build/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/snappy-java-1.1.10.5.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/slf4j-api-1.7.30.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_servlet-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_hotspot-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient_common-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/simpleclient-0.9.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-unix-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-native-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-classes-epoll-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-transport-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-resolver-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-handler-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-common-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-codec-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/netty-buffer-4.1.94.Final.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/metrics-core-4.1.12.1.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-core-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/logback-classic-1.2.10.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jline-2.14.6.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-ajax-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-util-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-servlet-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-server-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-security-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-io-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jetty-http-9.4.52.v20230823.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/javax.servlet-api-3.1.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-databind-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-core-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/jackson-annotations-2.15.2.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-io-2.11.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/commons-cli-1.5.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../lib/audience-annotations-0.12.0.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-prometheus-metrics-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-jute-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-3.8.3.1.2.2.0-128.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../zookeeper-server/src/main/resources/lib/*.jar:/usr/odp/1.2.2.0-128/zookeeper/bin/../conf::/usr/share/zookeeper/*\n2025-12-25 16:58:25,752 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.library.path=/usr/java/packages/lib/aarch64:/lib:/usr/lib\n2025-12-25 16:58:25,753 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.io.tmpdir=/tmp\n2025-12-25 16:58:25,753 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:java.compiler=<NA>\n2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.name=Linux\n2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.arch=aarch64\n2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.version=6.12.0-105.51.5.el9uek.aarch64\n2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.name=root\n2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.home=/root\n2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:user.dir=/var/lib/ambari-agent\n2025-12-25 16:58:25,755 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.free=75MB\n2025-12-25 16:58:25,756 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.max=247MB\n2025-12-25 16:58:25,756 [myid:] - INFO  [main:o.a.z.Environment@98] - Client environment:os.memory.total=87MB\n2025-12-25 16:58:25,759 [myid:] - INFO  [main:o.a.z.ZooKeeper@637] - Initiating client connection, connectString=master.cdp:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@51565ec2\n2025-12-25 16:58:25,767 [myid:] - INFO  [main:o.a.z.c.X509Util@78] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n2025-12-25 16:58:25,771 [myid:] - INFO  [main:o.a.z.ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes\n2025-12-25 16:58:25,782 [myid:] - INFO  [main:o.a.z.ClientCnxn@1741] - zookeeper.request.timeout value is 0. feature enabled=false\n2025-12-25 16:58:25,787 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1177] - Opening socket connection to server master.cdp/10.0.0.2:2181.\n2025-12-25 16:58:25,789 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1179] - SASL config status: Will not attempt to authenticate using SASL (unknown error)\n2025-12-25 16:58:25,798 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1011] - Socket connection established, initiating session, client: /10.0.0.3:38940, server: master.cdp/10.0.0.2:2181\n2025-12-25 16:58:25,814 [myid:master.cdp:2181] - INFO  [main-SendThread(master.cdp:2181):o.a.z.ClientCnxn$SendThread@1452] - Session establishment complete on server master.cdp/10.0.0.2:2181, session id = 0x1000019eac30020, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\nNode does not exist: /nifi\n2025-12-25 16:58:25,827 [myid:] - ERROR [main:o.a.z.u.ServiceUtils@48] - Exiting JVM with code 1')
2025-12-25 16:58:26,144 - Nifi ZNode does not exist, so no pre-existing cluster.: /nifi
2025-12-25 16:58:26,145 - PropertiesFile['/usr/odp/current/nifi/conf/nifi.properties'] {'properties': ..., 'mode': 0o600, 'owner': 'nifi', 'group': 'nifi'}
2025-12-25 16:58:26,149 - Generating properties file: /usr/odp/current/nifi/conf/nifi.properties
2025-12-25 16:58:26,149 - File['/usr/odp/current/nifi/conf/nifi.properties'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600, 'encoding': 'UTF-8'}
2025-12-25 16:58:26,194 - Writing File['/usr/odp/current/nifi/conf/nifi.properties'] because contents don't match
2025-12-25 16:58:26,200 - Changing owner for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:58:26,201 - Changing group for /usr/odp/current/nifi/conf/nifi.properties from 0 to nifi
2025-12-25 16:58:26,201 - Changing permission for /usr/odp/current/nifi/conf/nifi.properties from 644 to 600
2025-12-25 16:58:26,204 - File['/usr/odp/current/nifi/conf/bootstrap.conf'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:58:26,204 - Writing File['/usr/odp/current/nifi/conf/bootstrap.conf'] because contents don't match
2025-12-25 16:58:26,210 - Changing owner for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:58:26,211 - Changing group for /usr/odp/current/nifi/conf/bootstrap.conf from 0 to nifi
2025-12-25 16:58:26,211 - Changing permission for /usr/odp/current/nifi/conf/bootstrap.conf from 644 to 600
2025-12-25 16:58:26,214 - File['/usr/odp/current/nifi/conf/logback.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:58:26,214 - Writing File['/usr/odp/current/nifi/conf/logback.xml'] because contents don't match
2025-12-25 16:58:26,219 - Changing owner for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:58:26,220 - Changing group for /usr/odp/current/nifi/conf/logback.xml from 0 to nifi
2025-12-25 16:58:26,220 - Changing permission for /usr/odp/current/nifi/conf/logback.xml from 644 to 400
2025-12-25 16:58:26,223 - File['/usr/odp/current/nifi/conf/state-management.xml'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:58:26,223 - Writing File['/usr/odp/current/nifi/conf/state-management.xml'] because contents don't match
2025-12-25 16:58:26,228 - Changing owner for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:58:26,229 - Changing group for /usr/odp/current/nifi/conf/state-management.xml from 0 to nifi
2025-12-25 16:58:26,229 - Changing permission for /usr/odp/current/nifi/conf/state-management.xml from 644 to 400
2025-12-25 16:58:26,234 - File['/usr/odp/current/nifi/conf/authorizers.xml'] {'content': b'<authorizers>\n        \n        \n        <authorizer>\n        <identifier>ranger-provider</identifier>\n        \n        <class>org.apache.nifi.ranger.authorization.RangerNiFiAuthorizer</class>\n        <property name="Ranger Audit Config Path">/usr/odp/current/nifi/conf/ranger-nifi-audit.xml</property>\n        <property name="Ranger Security Config Path">/usr/odp/current/nifi/conf/ranger-nifi-security.xml</property>\n        <property name="Ranger Service Type">nifi</property>\n        <property name="Ranger Application Id">nifi</property>\n        <property name="Ranger Admin Identity" />\n        \n        <property name="Ranger Kerberos Enabled">false</property>\n        \n        \n\n        \n\n\n\n\n        </authorizer>\n        </authorizers>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:58:26,238 - File['/usr/odp/current/nifi/conf/login-identity-providers.xml'] {'content': b'<loginIdentityProviders>\n    \n    \n\n    \n        \n    \n        \n\n</loginIdentityProviders>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o600}
2025-12-25 16:58:26,240 - File['/usr/odp/current/nifi/bin/nifi-env.sh'] {'content': InlineTemplate(...), 'owner': 'nifi', 'group': 'nifi', 'mode': 0o755}
2025-12-25 16:58:26,240 - Writing File['/usr/odp/current/nifi/bin/nifi-env.sh'] because contents don't match
2025-12-25 16:58:26,245 - Changing owner for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:58:26,246 - Changing group for /usr/odp/current/nifi/bin/nifi-env.sh from 0 to nifi
2025-12-25 16:58:26,246 - Changing permission for /usr/odp/current/nifi/bin/nifi-env.sh from 644 to 755
2025-12-25 16:58:26,248 - File['/usr/odp/current/nifi/conf/bootstrap-notification-services.xml'] {'content': b'<services>\n    \n    \n\n\n</services>', 'owner': 'nifi', 'group': 'nifi', 'mode': 0o400}
2025-12-25 16:58:26,249 - Using repository toolkit script: /usr/odp/current/nifi-toolkit/bin/encrypt-config.sh
2025-12-25 16:58:26,249 - File['/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh'] {'mode': 0o755}
2025-12-25 16:58:26,249 - Encrypting NiFi sensitive configuration properties
2025-12-25 16:58:26,253 - Execute[('/usr/odp/current/nifi-toolkit/bin/encrypt-config.sh', '-v', '-b', '/usr/odp/current/nifi/conf/bootstrap.conf', '-n', '/usr/odp/current/nifi/conf/nifi.properties', '-p', [PROTECTED])] {'user': 'nifi', 'logoutput': False, 'environment': {'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk', 'JAVA_OPTS': '-Xms128m -Xmx256m'}}

Command failed after 10 tries
